function _d(s){try{return decodeURIComponent(escape(atob(s)));}catch(e){return s;}};(function(){"_d('dXNlIHN0cmljdA==')";// ============================================ // ИНФОРМАЦИЯ ОБ АВТОРЕ // ============================================ // Автор: admin@fovway.ru // ============================================ // ============================================ // НАСТРОЙКИ - Значения по умолчанию // ============================================ // API ключ и модель настраиваются через меню настроек // Пользователь должен указать свой API ключ и модель в настройках var _0x1 = "";var _0x2 = "";var _0x3 = "_d('aHR0cHM6Ly9vcGVucm91dGVyLmFpL2FwaS92MQ==')";// Функции для получения значений из настроек function getOpenRouterApiKey(){if(!Lampa || !Lampa.Storage){return "";}var _0x4 = Lampa.Storage.get("_d('YWlfc2VhcmNoX2FwaV9rZXk=')");if(_0x4 !== null && _0x4 !== undefined && _0x4.trim()){return _0x4.trim();}// Пользователь должен указать свой API ключ в настройках return "";}function getAiModel(){if(!Lampa || !Lampa.Storage){return "";}var _0x4 = Lampa.Storage.get("_d('YWlfc2VhcmNoX21vZGVs')");if(_0x4 !== null && _0x4 !== undefined && _0x4.trim()){return _0x4.trim();}// Пользователь должен указать свою модель в настройках return "";}function getOpenRouterBaseUrl(){if(!Lampa || !Lampa.Storage){return _0x3;}var _0x4 = Lampa.Storage.get("_d('YWlfc2VhcmNoX2Jhc2VfdXJs')");if(_0x4 !== null && _0x4 !== undefined && _0x4.trim()){return _0x4.trim();}return _0x3;}// Инициализируем переменные(будут обновлены в initPlugin)var _0x7 = "";var _0x8 = "";var _0x9 = _0x3;// ============================================ // ЛОГИРОВАНИЕ // ============================================ // Создаем _0xa для плагина с префиксом "_d('0JjQmCDQv9C+0LjRgdC6')" var _0xa ={log: function(){console.log.apply(console,["_d('W9CY0Jgg0L/QvtC40YHQul0=')"].concat(Array.prototype.slice.call(arguments)));},warn: function(){console.warn.apply(console,["_d('W9CY0Jgg0L/QvtC40YHQul0=')"].concat(Array.prototype.slice.call(arguments)));},error: function(){console.error.apply(console,["_d('W9CY0Jgg0L/QvtC40YHQul0=')"].concat(Array.prototype.slice.call(arguments)));},};// ============================================ // Иконка ИИ для кнопки(лупа с текстом AI внутри)var _0xb = "_d('PHN2ZyB2aWV3Qm94PSIxMiAxOCA0MiAzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImFpR3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM4QjVDRjYiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InN0b3AtY29sb3IiIHZhbHVlcz0iIzhCNUNGNjsjQTg1NUY3OyM4QjVDRjYiIGR1cj0iM3MiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9zdG9wPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzA2QjZENCI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3RvcC1jb2xvciIgdmFsdWVzPSIjMDZCNkQ0OyMwRUE1RTk7IzA2QjZENCIgZHVyPSIzcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz48L3N0b3A+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PGc+PHBhdGggZmlsbD0idXJsKCNhaUdyYWRpZW50KSIgZD0iTTE0IDQ0TDI0IDIwQzI0LjUgMTkgMjUuNSAxOC41IDI2LjUgMTguNUgyOS41QzMwLjUgMTguNSAzMS41IDE5IDMyIDIwTDQyIDQ0QzQyLjUgNDUgNDIgNDYgNDEgNDZIMzcuNUMzNi41IDQ2IDM1LjcgNDUuNSAzNS4zIDQ0LjdMMzMuOCA0MUgyMi4yTDIwLjcgNDQuN0MyMC4zIDQ1LjUgMTkuNSA0NiAxOC41IDQ2SDE1QzE0IDQ2IDEzLjUgNDUgMTQgNDRaTTIzLjUgMzZIMzIuNUwyOCAyNi41TDIzLjUgMzZaTTQ2IDIwQzQ2IDE5LjQ0NzcgNDYuNDQ3NyAxOSA0NyAxOUg1MUM1MS41NTIzIDE5IDUyIDE5LjQ0NzcgNTIgMjBWNDVDNTIgNDUuNTUyMyA1MS41NTIzIDQ2IDUxIDQ2SDQ3QzQ2LjQ0NzcgNDYgNDYgNDUuNTUyMyA0NiA0NVYyMFoiLz48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MC43OzEiIGR1cj0iM3MiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9nPjwvc3ZnPg==')";// Настройки var _0xc = 24 * 60 * 60 * 1000;// 24 часа - время жизни одной записи в кэше var _0xd = "_d('YWlfc2VhcmNoX2NhY2hl')";var _0xe = "_d('YWlfc2VhcmNoX3RtZGJfY2FjaGU=')";var _0xf = 15;var _0xg = 45000;// 45 секунд - таймаут для запросов к API var _0xh = "_d('YWlfc2VhcmNoX2hpc3Rvcnk=')";// Ключ для хранения истории поиска var _0xi = 20;// Максимальное количество записей в истории по умолчанию var _0xj = true;// Автоочистка кэша включена по умолчанию var _0xk = 24 * 60 * 60 * 1000;// Интервал автоочистки по умолчанию: 24 часа var _0xl = "_d('YWlfc2VhcmNoX2F1dG9fY2xlYXJfY2FjaGVfbGFzdA==')";// Ключ для хранения времени последней автоочистки // Функция для получения количества результатов из настроек function getMaxResults(){if(!Lampa || !Lampa.Storage){return _0xf;}var _0x4 = Lampa.Storage.get("_d('YWlfc2VhcmNoX21heF9yZXN1bHRz')");if(_0x4 !== null && _0x4 !== undefined){return parseInt(_0x4)|| _0xf;}return _0xf;}// Функция для получения максимального количества записей в истории function getHistoryMax(){if(!Lampa || !Lampa.Storage){return _0xi;}var _0x4 = Lampa.Storage.get("_d('YWlfc2VhcmNoX2hpc3RvcnlfbWF4')");if(_0x4 !== null && _0x4 !== undefined){return parseInt(_0x4)|| _0xi;}return _0xi;}// Функция для получения истории поиска function getSearchHistory(){if(!Lampa || !Lampa.Storage){return [];}try{var _0xo = Lampa.Storage.get(_0xh);return Array.isArray(_0xo)? _0xo : [];}catch(e){_0xa.error("_d('0J7RiNC40LHQutCwINC/0YDQuCDQv9C+0LvRg9GH0LXQvdC40Lgg0LjRgdGC0L7RgNC40Lgg0L/QvtC40YHQutCwOg==')",e);return [];}}// Функция для сохранения запроса в историю function saveToHistory(_0x4p){if(!Lampa || !Lampa.Storage || !_0x4p || !_0x4p.trim()){return;}try{var _0xo = getSearchHistory();var _0xq = _0x4p.trim();// Удаляем дубликаты(если такой запрос уже есть)_0xo = _0xo.filter(function(_0x12){return _0x12 !== _0xq;});// Добавляем новый запрос в начало _0xo.unshift(_0xq);// Ограничиваем количество записей var _0xr = getHistoryMax();if(_0xo.length > _0xr){_0xo = _0xo.slice(0,_0xr);}// Сохраняем Lampa.Storage.set(_0xh,_0xo);}catch(e){_0xa.error("_d('0J7RiNC40LHQutCwINC/0YDQuCDRgdC+0YXRgNCw0L3QtdC90LjQuCDQsiDQuNGB0YLQvtGA0LjRjjo=')",e);}}// Функция для удаления записи из истории function removeFromHistory(_0x4p){if(!Lampa || !Lampa.Storage || !_0x4p){return;}try{var _0xo = getSearchHistory();_0xo = _0xo.filter(function(_0x12){return _0x12 !== _0x4p;});Lampa.Storage.set(_0xh,_0xo);return _0xo;}catch(e){_0xa.error("_d('0J7RiNC40LHQutCwINC/0YDQuCDRg9C00LDQu9C10L3QuNC4INC40Lcg0LjRgdGC0L7RgNC40Lg6')",e);return getSearchHistory();}}// Функция для очистки всей истории function clearHistory(){if(!Lampa || !Lampa.Storage){return;}try{Lampa.Storage.set(_0xh,[]);_0xa.log("_d('0JjRgdGC0L7RgNC40Y8g0L/QvtC40YHQutCwINC+0YfQuNGJ0LXQvdCw')");}catch(e){_0xa.error("_d('0J7RiNC40LHQutCwINC/0YDQuCDQvtGH0LjRgdGC0LrQtSDQuNGB0YLQvtGA0LjQuDo=')",e);}}// Функция для получения настройки автоочистки кэша function getAutoClearCacheEnabled(){if(!Lampa || !Lampa.Storage){return _0xj;}var _0x4 = Lampa.Storage.get("_d('YWlfc2VhcmNoX2F1dG9fY2xlYXJfY2FjaGVfZW5hYmxlZA==')");if(_0x4 !== null && _0x4 !== undefined){return _0x4 === true || _0x4 === "_d('dHJ1ZQ==')";}return _0xj;}// Функция для получения интервала автоочистки кэша(в миллисекундах)function getAutoClearCacheInterval(){if(!Lampa || !Lampa.Storage){return _0xk;}var _0x4 = Lampa.Storage.get("_d('YWlfc2VhcmNoX2F1dG9fY2xlYXJfY2FjaGVfaW50ZXJ2YWw=')");if(_0x4 !== null && _0x4 !== undefined){var _0xv = parseInt(_0x4);if(!isNaN(_0xv)&& _0xv > 0){return _0xv * 60 * 60 * 1000;// Конвертируем часы в миллисекунды}}return _0xk;}// Функция для очистки устаревших записей кэша(оставляет только актуальные)function clearExpiredCache(){if(!Lampa || !Lampa.Storage){return;}try{var _0xw = Date._0xw();var _0xx = false;// Очищаем устаревшие записи AI кэша var _0xy = Lampa.Storage.get(_0xd)||{};var _0xz = Object.keys(_0xy).length;var _0x10 ={};for(var _0x11 in _0xy){if(_0xy.hasOwnProperty(_0x11)){var _0x12 = _0xy[_0x11];if(_0x12 && _0x12.timestamp && _0xw - _0x12.timestamp < _0xc){_0x10[_0x11] = _0x12;}}}var _0x13 = _0xz - Object.keys(_0x10).length;if(_0x13 > 0){Lampa.Storage.set(_0xd,_0x10);_0xx = true;}// Очищаем устаревшие записи TMDB кэша var _0x14 = Lampa.Storage.get(_0xe)||{};var _0x15 = Object.keys(_0x14).length;var _0x16 ={};for(var _0x11 in _0x14){if(_0x14.hasOwnProperty(_0x11)){var _0x12 = _0x14[_0x11];if(_0x12 && _0x12.timestamp && _0xw - _0x12.timestamp < _0xc){_0x16[_0x11] = _0x12;}}}var _0x19 = _0x15 - Object.keys(_0x16).length;if(_0x19 > 0){Lampa.Storage.set(_0xe,_0x16);_0xx = true;}// Сохраняем время последней автоочистки(всегда,даже если ничего не удалено)Lampa.Storage.set(_0xl,_0xw);// Логируем результат очистки только если что-то было удалено if(_0xx){var _0x1a = _0x13 + _0x19;_0xa.log("_d('0JDQstGC0L7QvtGH0LjRgdGC0LrQsCDQutGN0YjQsDog0YPQtNCw0LvQtdC90L4g')" + _0x1a + "_d('INGD0YHRgtCw0YDQtdCy0YjQuNGFINC30LDQv9C40YHQtdC5IChBSTog')" + _0x13 + "_d('LCBUTURCOiA=')" + _0x19 + ")");}}catch(e){_0xa.error("_d('0J7RiNC40LHQutCwINC/0YDQuCDQsNCy0YLQvtC+0YfQuNGB0YLQutC1INC60Y3RiNCwOg==')",e);}}// Функция для проверки и выполнения автоочистки кэша function checkAndAutoClearCache(){if(!Lampa || !Lampa.Storage){return;}if(!getAutoClearCacheEnabled()){return;}try{var _0x1b = Lampa.Storage.get(_0xl);var _0xv = getAutoClearCacheInterval();var _0xw = Date._0xw();// Если еще не было автоочистки или прошло достаточно времени if(!_0x1b || _0xw - _0x1b >= _0xv){_0xa.log("_d('0JDQstGC0L7QvtGH0LjRgdGC0LrQsCDQutGN0YjQsDog0LfQsNC/0YPRgdC6INC+0YfQuNGB0YLQutC4INGD0YHRgtCw0YDQtdCy0YjQuNGFINC30LDQv9C40YHQtdC5Li4u')");clearExpiredCache();}}catch(e){_0xa.error("_d('0J7RiNC40LHQutCwINC/0YDQuCDQv9GA0L7QstC10YDQutC1INCw0LLRgtC+0L7Rh9C40YHRgtC60Lgg0LrRjdGI0LA6')",e);}}// Инициализируем значением по умолчанию,будет обновлено в initPlugin var _0x1e = _0xf;// Кеширование function getCachedData(_0x2e,subKey){try{var _0x1f = Lampa.Storage.get(_0x2e)||{};var _0x12 = _0x1f[subKey];if(_0x12 && Date._0xw()- _0x12.timestamp < _0xc){return _0x12.data;}}catch(e){_0xa.error("_d('Q2FjaGUgcmVhZCBlcnJvcjo=')",e);}return null;}function saveCachedData(_0x2e,subKey,data){try{var _0x1f = Lampa.Storage.get(_0x2e)||{};_0x1f[subKey] ={data: data,timestamp: Date._0xw(),};Lampa.Storage.set(_0x2e,_0x1f);}catch(e){_0xa.error("_d('Q2FjaGUgd3JpdGUgZXJyb3I6')",e);}}// Простая функция для создания хеша строки(поддерживает Unicode)function simpleHash(str){var _0x1i = 0;if(str.length === 0)return _0x1i.toString();for(var _0x1j = 0;_0x1j < str.length;_0x1j++){var _0x1k = str.charCodeAt(_0x1j);_0x1i =(_0x1i << 5)- _0x1i + _0x1k;_0x1i = _0x1i & _0x1i;// Convert to 32bit integer}return Math.abs(_0x1i).toString(36);}// Функция для надежного извлечения JSON из текста function extractJSON(text){if(!text || typeof text !== "_d('c3RyaW5n')"){return null;}// Убираем лишние пробелы в начале и конце text = text.trim();// Пытаемся найти JSON в markdown блоке кода(```json ... ``` или ``` ... ```)// Используем более умный подход: находим начало и конец markdown блока var _0x1l = text.indexOf("_d('YGBg')");if(_0x1l !== -1){var _0x1m = _0x1l + 3;// Пропускаем слово "_d('anNvbg==')" если есть if(text.substring(_0x1m,_0x1m + 4).toLowerCase()=== "_d('anNvbg==')"){_0x1m += 4;}// Пропускаем пробелы и переводы строк while(_0x1m < text.length &&(text[_0x1m] === " " || text[_0x1m] === "\n" || text[_0x1m] === "\r")){_0x1m++;}// Ищем конец блока var _0x1n = text.indexOf("_d('YGBg')",_0x1m);if(_0x1n !== -1){var _0x1o = text.substring(_0x1m,_0x1n).trim();try{return JSON.parse(_0x1o);}catch(e){// Продолжаем поиск}}}// Ищем первый полный JSON объект(начинается с{и заканчивается})var _0x1p = 0;var _0x1q = -1;var _0x1r = -1;for(var _0x1j = 0;_0x1j < text.length;_0x1j++){if(text[_0x1j] === "{"){if(_0x1q === -1){_0x1q = _0x1j;}_0x1p++;}else if(text[_0x1j] === "}"){_0x1p--;if(_0x1p === 0 && _0x1q !== -1){_0x1r = _0x1j;break;}}}if(_0x1q !== -1 && _0x1r !== -1){try{var _0x1t = text.substring(_0x1q,_0x1r + 1);return JSON.parse(_0x1t);}catch(e){// Продолжаем поиск}}// Пытаемся найти JSON через регулярное выражение(более агрессивно)var _0x1u = text.match(/\{[\s\S]*\}/);if(_0x1u){var _0x1t = _0x1u[0];try{return JSON.parse(_0x1t);}catch(e){// Пробуем очистить от возможных проблемных символов try{var _0xx = _0x1t // Убираем комментарии(однострочные и многострочные).replace(/\/\*[\s\S]*?\*\//g,"")// Многострочные комментарии .replace(/\/\/.*$/gm,"")// Однострочные комментарии // Исправляем ключи без кавычек(простые случаи)- делаем это ДО замены кавычек .replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)\s*:/g,"_d('JDEiJDIiOg==')")// Убираем trailing commas .replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/,(\s*[}\]])/g,"$1");// Пытаемся заменить одинарные кавычки на двойные,но только если это действительно нужно // Это рискованная операция,поэтому делаем её только если парсинг без неё не удался try{return JSON.parse(_0xx);}catch(e){// Если не удалось,пробуем заменить одинарные кавычки(но это может сломать строки с апострофами)_0xx = _0xx.replace(/"_d('L2csIA==')""_d('Jyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoXzB4eCk7CiAgICAgICAgfSBjYXRjaCAoZTIpIHsKICAgICAgICAgIC8vINCf0YDQvtCx0YPQtdC8INC10YnQtSDQsdC+0LvQtdC1INCw0LPRgNC10YHRgdC40LLQvdGD0Y4g0L7Rh9C40YHRgtC60YMKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vINCj0LTQsNC70Y/QtdC8INCy0YHQtSDRh9GC0L4g0L3QtSDRj9Cy0LvRj9C10YLRgdGPINGH0LDRgdGC0YzRjiBKU09OINGB0YLRgNGD0LrRgtGD0YDRiwogICAgICAgICAgICB2YXIgXzB4MXggPSBfMHgxdC5zcGxpdCg=')"\n"_d('KTsKICAgICAgICAgICAgdmFyIF8weDF5ID0gW107CiAgICAgICAgICAgIHZhciBfMHgxeiA9IGZhbHNlOwogICAgICAgICAgICB2YXIgXzB4MjAgPSBmYWxzZTsKCiAgICAgICAgICAgIGZvciAodmFyIF8weDFqID0gMDsgXzB4MWogPCBfMHgxeC5sZW5ndGg7IF8weDFqKyspIHsKICAgICAgICAgICAgICB2YXIgXzB4MjIgPSBfMHgxeFtfMHgxal0udHJpbSgpOwogICAgICAgICAgICAgIC8vINCf0YDQvtC/0YPRgdC60LDQtdC8INC/0YPRgdGC0YvQtSDRgdGC0YDQvtC60Lgg0Lgg0YHRgtGA0L7QutC4LCDQutC+0YLQvtGA0YvQtSDRj9Cy0L3QviDQvdC1INGP0LLQu9GP0Y7RgtGB0Y8g0YfQsNGB0YLRjNGOIEpTT04KICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAhXzB4MjIgfHwKICAgICAgICAgICAgICAgIF8weDIyLmluZGV4T2Yo')"//"_d('KSA9PT0gMCB8fAogICAgICAgICAgICAgICAgKF8weDIyLmluZGV4T2Yo')"/*"_d('KSA9PT0gMCAmJgogICAgICAgICAgICAgICAgICBfMHgyMi5pbmRleE9mKA==')"*/"_d('KSA9PT0gXzB4MjIubGVuZ3RoIC0gMikKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfMHgxeS5wdXNoKF8weDF4W18weDFqXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBfMHgyMyA9IF8weDF5LmpvaW4o')"\n"_d('KTsKICAgICAgICAgICAgLy8g0KTQuNC90LDQu9GM0L3QsNGPINC+0YfQuNGB0YLQutCwCiAgICAgICAgICAgIF8weDIzID0gXzB4MjMKICAgICAgICAgICAgICAucmVwbGFjZSgvLFxzKn0vZywg')"}"_d('KQogICAgICAgICAgICAgIC5yZXBsYWNlKC8sXHMqXS9nLCA=')"]").replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)\s*:/g,"_d('JDEiJDIiOg==')");return JSON.parse(_0x23);}catch(e3){// Не удалось исправить _0xa.warn("Не удалось исправить JSON:"_d('LCBlMy5tZXNzYWdlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8vINCk0YPQvdC60YbQuNGPINC00LvRjyDQvdC+0YDQvNCw0LvQuNC30LDRhtC40Lgg0Lgg0LLQsNC70LjQtNCw0YbQuNC4INGA0LXQutC+0LzQtdC90LTQsNGG0LjQuQogIGZ1bmN0aW9uIG5vcm1hbGl6ZVJlY29tbWVuZGF0aW9ucyhkYXRhKSB7CiAgICB2YXIgXzB4MjQgPSBbXTsKCiAgICBpZiAoIWRhdGEpIHsKICAgICAgcmV0dXJuIF8weDI0OwogICAgfQoKICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDRgNCw0LfQu9C40YfQvdGL0LUg0LLQsNGA0LjQsNC90YLRiyDRgdGC0YDRg9C60YLRg9GA0Ysg0L7RgtCy0LXRgtCwCiAgICB2YXIgXzB4MjUgPQogICAgICBkYXRhLl8weDI0IHx8IGRhdGEubW92aWVzIHx8IGRhdGEuaXRlbXMgfHwgZGF0YS5fMHgyeCB8fCBbXTsKCiAgICBpZiAoIUFycmF5LmlzQXJyYXkoXzB4MjUpKSB7CiAgICAgIC8vINCV0YHQu9C4INGN0YLQviDQvdC1INC80LDRgdGB0LjQsiwg0L3QviDQtdGB0YLRjCDQvtCx0YrQtdC60YIg0YEg0LzQsNGB0YHQuNCy0L7QvCDQstC90YPRgtGA0LgKICAgICAgaWYgKF8weDI1ICYmIHR5cGVvZiBfMHgyNSA9PT0g')"object"_d('KSB7CiAgICAgICAgXzB4MjUgPQogICAgICAgICAgT2JqZWN0LnZhbHVlcyhfMHgyNSkuZmluZChmdW5jdGlvbiAoXzB4MTIpIHsKICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoXzB4MTIpOwogICAgICAgICAgfSkgfHwgW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgXzB4MjUgPSBbXTsKICAgICAgfQogICAgfQoKICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LDQutGC0YPQsNC70YzQvdC+0LUg0LfQvdCw0YfQtdC90LjQtSBfMHgxZSDQuNC3INC90LDRgdGC0YDQvtC10LoKICAgIHZhciBfMHgyNiA9IGdldE1heFJlc3VsdHMoKTsKCiAgICAvLyDQndC+0YDQvNCw0LvQuNC30YPQtdC8INC60LDQttC00YPRjiDRgNC10LrQvtC80LXQvdC00LDRhtC40Y4KICAgIGZvciAoCiAgICAgIHZhciBfMHgxaiA9IDA7CiAgICAgIF8weDFqIDwgXzB4MjUubGVuZ3RoICYmIF8weDI0Lmxlbmd0aCA8IF8weDI2OwogICAgICBfMHgxaisrCiAgICApIHsKICAgICAgdmFyIF8weDI4ID0gXzB4MjVbXzB4MWpdOwogICAgICBpZiAoIV8weDI4IHx8IHR5cGVvZiBfMHgyOCAhPT0g')"object"_d('KSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHZhciBfMHgyOSA9IHsKICAgICAgICB0aXRsZTogXzB4MjgudGl0bGUgfHwgXzB4MjgubmFtZSB8fCBfMHgyOC5maWxtIHx8IA==')""_d('LAogICAgICAgIF8weDU3OiBwYXJzZUludChfMHgyOC5fMHg1NyB8fCBfMHgyOC5yZWxlYXNlX3llYXIgfHwgXzB4MjguZGF0ZSB8fCA=')"0"_d('KSB8fCBudWxsLAogICAgICAgIHJlYXNvbjoKICAgICAgICAgIF8weDI4LnJlYXNvbiB8fCBfMHgyOC5leHBsYW5hdGlvbiB8fCBfMHgyOC5kZXNjcmlwdGlvbiB8fCBfMHgyOC53aHkgfHwg')""_d('LAogICAgICB9OwoKICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRh9GC0L4g0LXRgdGC0Ywg0YXQvtGC0Y8g0LHRiyDQvdCw0LfQstCw0L3QuNC1CiAgICAgIGlmIChfMHgyOS50aXRsZSAmJiBfMHgyOS50aXRsZS50cmltKCkpIHsKICAgICAgICBfMHgyNC5wdXNoKF8weDI5KTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBfMHgyNDsKICB9CgogIC8vINCX0LDQv9GA0L7RgSDQuiBPcGVuUm91dGVyIEFQSSDRgSByZXRyeSDQu9C+0LPQuNC60L7QuQogIGZ1bmN0aW9uIHF1ZXJ5QUkocHJvbXB0LCBjYWxsYmFjaywgcmV0cnlDb3VudCwgc2tpcFJlc3BvbnNlRm9ybWF0KSB7CiAgICByZXRyeUNvdW50ID0gcmV0cnlDb3VudCB8fCAwOwogICAgc2tpcFJlc3BvbnNlRm9ybWF0ID0gc2tpcFJlc3BvbnNlRm9ybWF0IHx8IGZhbHNlOwogICAgdmFyIF8weDJhID0gMjsKICAgIHZhciBfMHgyYiA9IDU7IC8vINCR0L7Qu9GM0YjQtSDQv9C+0L/Ri9GC0L7QuiDQtNC70Y8g0L7RiNC40LHQutC4IHJhdGUgbGltaXQKCiAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INCw0LrRgtGD0LDQu9GM0L3Ri9C5IEFQSSDQutC70Y7RhyDQuNC3INC90LDRgdGC0YDQvtC10LoKICAgIHZhciBfMHgyYyA9IGdldE9wZW5Sb3V0ZXJBcGlLZXkoKTsKCiAgICBpZiAoIV8weDJjIHx8ICFfMHgyYy50cmltKCkpIHsKICAgICAgY2FsbGJhY2soCiAgICAgICAgbmV3IEVycm9yKAogICAgICAgICAg')"API ключ не настроен. Пожалуйста,укажите API ключ в настройках плагина."_d('CiAgICAgICAgKQogICAgICApOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8g0J/QvtC70YPRh9Cw0LXQvCDQsNC60YLRg9Cw0LvRjNC90YPRjiDQvNC+0LTQtdC70Ywg0LjQtyDQvdCw0YHRgtGA0L7QtdC6CiAgICB2YXIgXzB4MmQgPSBnZXRBaU1vZGVsKCk7CgogICAgaWYgKCFfMHgyZCB8fCAhXzB4MmQudHJpbSgpKSB7CiAgICAgIGNhbGxiYWNrKAogICAgICAgIG5ldyBFcnJvcigKICAgICAgICAgIA==')"Модель ИИ не настроена. Пожалуйста,укажите модель в настройках плагина."_d('CiAgICAgICAgKQogICAgICApOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC60LXRiCAo0LjRgdC/0L7Qu9GM0LfRg9C10Lwg0YXQtdGIINC00LvRjyDQv9C+0LTQtNC10YDQttC60LggVW5pY29kZS/QutC40YDQuNC70LvQuNGG0YspCiAgICB2YXIgXzB4MmUgPSA=')"query_"_d('ICsgc2ltcGxlSGFzaChwcm9tcHQpOwogICAgdmFyIF8weDJmID0gZ2V0Q2FjaGVkRGF0YShfMHhkLCBfMHgyZSk7CiAgICBpZiAoXzB4MmYpIHsKICAgICAgY2FsbGJhY2sobnVsbCwgXzB4MmYpOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8g0J/QvtC70YPRh9Cw0LXQvCDQsNC60YLRg9Cw0LvRjNC90L7QtSDQt9C90LDRh9C10L3QuNC1IF8weDFlINC40Lcg0L3QsNGB0YLRgNC+0LXQugogICAgdmFyIF8weDI2ID0gZ2V0TWF4UmVzdWx0cygpOwoKICAgIC8vINCj0LvRg9GH0YjQtdC90L3Ri9C5INC/0YDQvtC80L/RgiDQtNC70Y8g0JjQmCDRgSDQtNC10YLQsNC70YzQvdGL0LzQuCDRgtGA0LXQsdC+0LLQsNC90LjRj9C80Lgg0Log0LrQsNGH0LXRgdGC0LLRgwogICAgdmFyIF8weDJoID0KICAgICAgJ9CX0LDQv9GA0L7RgSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y86IA==')""_d('ICsKICAgICAgcHJvbXB0ICsKICAgICAg')""_d('XG5cbicgKwogICAgICA=')"Проанализируй запрос и предложи "_d('ICsKICAgICAgXzB4MjYgKwogICAgICA=')" фильмов/сериалов,которые ТОЧНО соответствуют запросу.\n\n"_d('ICsKICAgICAg')"КРИТИЧЕСКИ ВАЖНО:\n"_d('ICsKICAgICAg')"1. Строго соблюдай категории: если запрос про детские фильмы - предлагай ТОЛЬКО детские(0+,6+,12+),если про взрослые - только взрослые. НЕ смешивай категории!\n"_d('ICsKICAgICAg')"2. Учитывай все параметры запроса: жанры,эпохи,стили,тематику\n"_d('ICsKICAgICAg')"3. Приоритет известным и популярным фильмам с высоким рейтингом(IMDB 7.0+,TMDB 7.0+)\n"_d('ICsKICAgICAg')"4. Обеспечь разнообразие: разные годы выпуска,разные поджанры,разные стили\n"_d('ICsKICAgICAg')"5. Используй точные названия фильмов(оригинальные или официальные русские)\n\n"_d('ICsKICAgICAg')"Формат ответа - ТОЛЬКО валидный JSON без дополнительного текста:\n"_d('ICsKICAgICAgJ3s=')"_0x24"_d('Olt7')"title":"Точное название фильма","_0x57"_d('OjIwMjN9XX1cblxuJyArCiAgICAgIA==')"Требования к JSON: валидный формат,все строки в двойных кавычках,без лишних запятых,ровно "_d('ICsKICAgICAgXzB4MjYgKwogICAgICA=')" элементов в массиве _0x24."_d('OwoKICAgIC8vINCk0L7RgNC80LjRgNGD0LXQvCDRgtC10LvQviDQt9Cw0L/RgNC+0YHQsAogICAgdmFyIF8weDJpID0gewogICAgICBfMHg1dTogXzB4MmQsIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8INC80L7QtNC10LvRjCDQuNC3INC90LDRgdGC0YDQvtC10LoKICAgICAgbWVzc2FnZXM6IFsKICAgICAgICB7CiAgICAgICAgICByb2xlOiA=')"system"_d('LAogICAgICAgICAgXzB4MnQ6CiAgICAgICAgICAgIA==')"Ты эксперт по кино и сериалам. Твоя задача - подбирать фильмы и сериалы,которые ТОЧНО соответствуют запросу пользователя.\n\n"_d('ICsKICAgICAgICAgICAg')"ПРАВИЛА ПОДБОРА:\n"_d('ICsKICAgICAgICAgICAg')"1. Строго соблюдай категории: детские(0+,6+,12+)и взрослые фильмы НЕ смешивать\n"_d('ICsKICAgICAgICAgICAg')"2. Учитывай все параметры запроса: возрастные ограничения,жанры,эпохи,стили,тематику\n"_d('ICsKICAgICAgICAgICAg')"3. Приоритет популярным и высокооцененным фильмам(рейтинг IMDB/TMDB 7.0+)\n"_d('ICsKICAgICAgICAgICAg')"4. Обеспечивай разнообразие: разные годы,поджанры,стили,режиссеры\n"_d('ICsKICAgICAgICAgICAg')"5. Используй точные официальные названия фильмов\n"_d('ICsKICAgICAgICAgICAg')"6. Если запрос неоднозначен,выбирай наиболее популярные и качественные варианты\n\n"_d('ICsKICAgICAgICAgICAg')"Отвечай ТОЛЬКО валидным JSON без дополнительного текста или объяснений."_d('LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgcm9sZTog')"user"_d('LAogICAgICAgICAgXzB4MnQ6IF8weDJoLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHRlbXBlcmF0dXJlOiAwLjYsIC8vINCR0LDQu9Cw0L3RgSDQvNC10LbQtNGDINGC0L7Rh9C90L7RgdGC0YzRjiDQuCDRgNCw0LfQvdC+0L7QsdGA0LDQt9C40LXQvAogICAgICBtYXhfdG9rZW5zOiAxNTAwLCAvLyDQo9Cy0LXQu9C40YfQtdC90L3Ri9C5INC70LjQvNC40YIg0LTQu9GPINCx0L7Qu9C10LUg0LrQsNGH0LXRgdGC0LLQtdC90L3Ri9GFINC+0YLQstC10YLQvtCyCiAgICB9OwoKICAgIC8vINCf0YvRgtCw0LXQvNGB0Y8g0LTQvtCx0LDQstC40YLRjCByZXNwb25zZV9mb3JtYXQg0YLQvtC70YzQutC+INC/0YDQuCDQv9C10YDQstC+0Lkg0L/QvtC/0YvRgtC60LUg0Lgg0LXRgdC70Lgg0L3QtSDQv9GA0L7Qv9GD0YnQtdC9CiAgICAvLyDQldGB0LvQuCDQvNC+0LTQtdC70Ywg0L3QtSDQv9C+0LTQtNC10YDQttC40LLQsNC10YIsIEFQSSDQstC10YDQvdC10YIg0L7RiNC40LHQutGDINC4INC80Ysg0YHQtNC10LvQsNC10Lwg0L/QvtCy0YLQvtGAINCx0LXQtyDRjdGC0L7Qs9C+INC/0LDRgNCw0LzQtdGC0YDQsAogICAgaWYgKHJldHJ5Q291bnQgPT09IDAgJiYgIXNraXBSZXNwb25zZUZvcm1hdCkgewogICAgICB0cnkgewogICAgICAgIF8weDJpLnJlc3BvbnNlX2Zvcm1hdCA9IHsgdHlwZTog')"json_object"_d('IH07CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyDQmNCz0L3QvtGA0LjRgNGD0LXQvCwg0LXRgdC70Lgg0L3QtSDQv9C+0LTQtNC10YDQttC40LLQsNC10YLRgdGPCiAgICAgIH0KICAgIH0KCiAgICAvLyDQodC+0LfQtNCw0LXQvCBQcm9taXNlINC00LvRjyDRgtCw0LnQvNCw0YPRgtCwCiAgICB2YXIgXzB4MmogPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAoXywgcmVqZWN0KSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJlamVjdCgKICAgICAgICAgIG5ldyBFcnJvcigKICAgICAgICAgICAg')"Превышено время ожидания ответа от API("_d('ICsKICAgICAgICAgICAgICBfMHhnIC8gMTAwMCArCiAgICAgICAgICAgICAg')" сек). Попробуйте позже или используйте более быструю модель."_d('CiAgICAgICAgICApCiAgICAgICAgKTsKICAgICAgfSwgXzB4Zyk7CiAgICB9KTsKCiAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INCw0LrRgtGD0LDQu9GM0L3Ri9C5IEJhc2UgVVJMINC40Lcg0L3QsNGB0YLRgNC+0LXQugogICAgdmFyIF8weDJrID0gZ2V0T3BlblJvdXRlckJhc2VVcmwoKTsKICAgIHZhciBfMHgybCA9IF8weDJrLmVuZHNXaXRoKA==')"/"_d('KQogICAgICA/IF8weDJrICsg')"chat/completions"_d('CiAgICAgIDogXzB4MmsgKyA=')"/chat/completions"_d('OwoKICAgIC8vINCe0LHQvtGA0LDRh9C40LLQsNC10LwgZmV0Y2gg0LIgUHJvbWlzZS5yYWNlINC00LvRjyDRgtCw0LnQvNCw0YPRgtCwCiAgICBQcm9taXNlLnJhY2UoWwogICAgICBmZXRjaChfMHgybCwgewogICAgICAgIG1ldGhvZDog')"POST"_d('LAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IA==')"Bearer "_d('ICsgXzB4MmMudHJpbSgpLAogICAgICAgICAg')"Content-Type": "application/json"_d('LAogICAgICAgICAg')"HTTP-Referer"_d('OiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLAogICAgICAgICAg')"X-Title": "Lampa AI Search"_d('LAogICAgICAgIH0sCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoXzB4MmkpLAogICAgICB9KSwKICAgICAgXzB4MmosCiAgICBdKQogICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHsKICAgICAgICAgICAgdmFyIF8weDJtID0g')"Ошибка API: "_d('ICsgcmVzcG9uc2Uuc3RhdHVzOwogICAgICAgICAgICB2YXIgXzB4Mm4gPSBudWxsOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIF8weDJuID0gSlNPTi5wYXJzZSh0ZXh0KTsKICAgICAgICAgICAgICBpZiAoXzB4Mm4uZXJyb3IgJiYgXzB4Mm4uZXJyb3IubWVzc2FnZSkgewogICAgICAgICAgICAgICAgXzB4Mm0gKz0g')" - "_d('ICsgXzB4Mm4uZXJyb3IubWVzc2FnZTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgXzB4Mm0gKz0g')" - "_d('ICsgdGV4dC5zdWJzdHJpbmcoMCwgMjAwKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBfMHgybSArPSA=')" - "_d('ICsgdGV4dC5zdWJzdHJpbmcoMCwgMjAwKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g0KHQv9C10YbQuNCw0LvRjNC90LDRjyDQvtCx0YDQsNCx0L7RgtC60LAg0L7RiNC40LHQutC4IDQyOSAoUmF0ZSBMaW1pdCkKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7CiAgICAgICAgICAgICAgLy8g0J/QvtC70YPRh9Cw0LXQvCDQstGA0LXQvNGPINC+0LbQuNC00LDQvdC40Y8g0LjQtyDQt9Cw0LPQvtC70L7QstC60LAgUmV0cnktQWZ0ZXIg0LjQu9C4INC40YHQv9C+0LvRjNC30YPQtdC8INGN0LrRgdC/0L7QvdC10L3RhtC40LDQu9GM0L3Rg9GOINC30LDQtNC10YDQttC60YMKICAgICAgICAgICAgICB2YXIgXzB4Mm8gPSByZXNwb25zZS5oZWFkZXJzLmdldCg=')"Retry-After"_d('KTsKICAgICAgICAgICAgICB2YXIgXzB4MnAgPSAwOwoKICAgICAgICAgICAgICBpZiAoXzB4Mm8pIHsKICAgICAgICAgICAgICAgIC8vIFJldHJ5LUFmdGVyINC80L7QttC10YIg0LHRi9GC0Ywg0LIg0YHQtdC60YPQvdC00LDRhSDQuNC70Lgg0LrQsNC6INC00LDRgtCwCiAgICAgICAgICAgICAgICB2YXIgXzB4MnEgPSBwYXJzZUludChfMHgybyk7CiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKF8weDJxKSkgewogICAgICAgICAgICAgICAgICBfMHgycCA9IF8weDJxICogMTAwMDsgLy8g0JrQvtC90LLQtdGA0YLQuNGA0YPQtdC8INGB0LXQutGD0L3QtNGLINCyINC80LjQu9C70LjRgdC10LrRg9C90LTRiwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8g0JXRgdC70LggUmV0cnktQWZ0ZXIg0L3QtSDRg9C60LDQt9Cw0L0sINC40YHQv9C+0LvRjNC30YPQtdC8INGN0LrRgdC/0L7QvdC10L3RhtC40LDQu9GM0L3Rg9GOINC30LDQtNC10YDQttC60YMKICAgICAgICAgICAgICBpZiAoXzB4MnAgPT09IDApIHsKICAgICAgICAgICAgICAgIC8vINCt0LrRgdC/0L7QvdC10L3RhtC40LDQu9GM0L3QsNGPINC30LDQtNC10YDQttC60LA6IDJecmV0cnlDb3VudCDRgdC10LrRg9C90LQgKNC80LjQvdC40LzRg9C8IDUg0YHQtdC60YPQvdC0KQogICAgICAgICAgICAgICAgXzB4MnAgPSBNYXRoLm1heCg1MDAwLCBNYXRoLnBvdygyLCByZXRyeUNvdW50KSAqIDEwMDApOwogICAgICAgICAgICAgICAgLy8g0J7Qs9GA0LDQvdC40YfQuNCy0LDQtdC8INC80LDQutGB0LjQvNGD0LwgNjAg0YHQtdC60YPQvdC00LDQvNC4CiAgICAgICAgICAgICAgICBfMHgycCA9IE1hdGgubWluKF8weDJwLCA2MDAwMCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyDQo9Cy0LXQu9C40YfQuNCy0LDQtdC8INC80LDQutGB0LjQvNCw0LvRjNC90L7QtSDQutC+0LvQuNGH0LXRgdGC0LLQviDQv9C+0L/Ri9GC0L7QuiDQtNC70Y8gNDI5CiAgICAgICAgICAgICAgdmFyIF8weDJyID0gXzB4MmI7CgogICAgICAgICAgICAgIGlmIChyZXRyeUNvdW50IDwgXzB4MnIpIHsKICAgICAgICAgICAgICAgIF8weGEud2FybigKICAgICAgICAgICAgICAgICAg')"Ошибка 429(Rate Limit). Ожидание "_d('ICsKICAgICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKF8weDJwIC8gMTAwMCkgKwogICAgICAgICAgICAgICAgICAgIA==')" секунд перед повторной попыткой "_d('ICsKICAgICAgICAgICAgICAgICAgICAocmV0cnlDb3VudCArIDEpICsKICAgICAgICAgICAgICAgICAgICA=')"/"_d('ICsKICAgICAgICAgICAgICAgICAgICAoXzB4MnIgKyAxKQogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcXVlcnlBSShwcm9tcHQsIGNhbGxiYWNrLCByZXRyeUNvdW50ICsgMSwgc2tpcFJlc3BvbnNlRm9ybWF0KTsKICAgICAgICAgICAgICAgIH0sIF8weDJwKTsKICAgICAgICAgICAgICAgIHJldHVybjsgLy8g0J3QtSDQstGL0LfRi9Cy0LDQtdC8IGNhbGxiYWNrINGBINC+0YjQuNCx0LrQvtC5LCDRgtCw0Log0LrQsNC6INC00LXQu9Cw0LXQvCDQv9C+0LLRgtC+0YAKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICAgICAgICAgICA=')"Превышен лимит запросов(429). Попробуйте позже. "_d('ICsKICAgICAgICAgICAgICAgICAgICA=')"Если ошибка повторяется,возможно,вы используете бесплатную модель с ограничениями."_d('CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g0JXRgdC70Lgg0L7RiNC40LHQutCwINGB0LLRj9C30LDQvdCwINGBINC90LXQv9C+0LTQtNC10YDQttC40LLQsNC10LzRi9C8INC/0LDRgNCw0LzQtdGC0YDQvtC8INC4INGN0YLQviDQv9C10YDQstCw0Y8g0L/QvtC/0YvRgtC60LAsCiAgICAgICAgICAgIC8vINC/0YDQvtCx0YPQtdC8INC/0L7QstGC0L7RgNC40YLRjCDQsdC10LcgcmVzcG9uc2VfZm9ybWF0CiAgICAgICAgICAgIHZhciBfMHgycyA9CiAgICAgICAgICAgICAgKF8weDJuICYmIF8weDJuLmVycm9yICYmIF8weDJuLmVycm9yLm1lc3NhZ2UpIHx8CiAgICAgICAgICAgICAgdGV4dCB8fAogICAgICAgICAgICAgIA==')""_d('OwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgcmV0cnlDb3VudCA9PT0gMCAmJgogICAgICAgICAgICAgIF8weDJpLnJlc3BvbnNlX2Zvcm1hdCAmJgogICAgICAgICAgICAgICFza2lwUmVzcG9uc2VGb3JtYXQgJiYKICAgICAgICAgICAgICAoXzB4MnMuaW5jbHVkZXMo')"response_format"_d('KSB8fAogICAgICAgICAgICAgICAgXzB4MnMuaW5jbHVkZXMo')"unsupported"_d('KSB8fAogICAgICAgICAgICAgICAgXzB4MnMuaW5jbHVkZXMo')"invalid"_d('KSB8fAogICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDApCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIF8weGEud2FybigKICAgICAgICAgICAgICAgIA==')"Параметр response_format не поддерживается,повторяем запрос без него"_d('CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAvLyDQn9C+0LLRgtC+0YDRj9C10Lwg0LfQsNC/0YDQvtGBINCx0LXQtyByZXNwb25zZV9mb3JtYXQKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHF1ZXJ5QUkocHJvbXB0LCBjYWxsYmFjaywgMCwgdHJ1ZSk7IC8vINCf0YDQvtC/0YPRgdC60LDQtdC8IHJlc3BvbnNlX2Zvcm1hdAogICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgcmV0dXJuOyAvLyDQndC1INCy0YvQt9GL0LLQsNC10LwgY2FsbGJhY2sg0YEg0L7RiNC40LHQutC+0LksINGC0LDQuiDQutCw0Log0LTQtdC70LDQtdC8INC/0L7QstGC0L7RgAogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXzB4Mm0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CiAgICAgIH0pCiAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghZGF0YS5jaG9pY2VzIHx8ICFkYXRhLmNob2ljZXNbMF0gfHwgIWRhdGEuY2hvaWNlc1swXS5tZXNzYWdlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICAgICAgICA=')"Неверная структура ответа API: отсутствуют choices"_d('CiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIF8weDJ0ID0gZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuXzB4MnQ7CiAgICAgICAgICBpZiAoIV8weDJ0IHx8IHR5cGVvZiBfMHgydCAhPT0g')"_d('c3RyaW5n')"_d('IHx8ICFfMHgydC50cmltKCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKA==')"Пустой ответ от ИИ"_d('KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDQmNC30LLQu9C10LrQsNC10LwgSlNPTiDQuNC3INC+0YLQstC10YLQsAogICAgICAgICAgdmFyIF8weDJ1ID0gZXh0cmFjdEpTT04oXzB4MnQpOwoKICAgICAgICAgIGlmICghXzB4MnUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICAgICAgIA==')"Не удалось извлечь JSON из ответа. Ответ: "_d('ICsKICAgICAgICAgICAgICAgIF8weDJ0LnN1YnN0cmluZygwLCAyMDApCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8g0J3QvtGA0LzQsNC70LjQt9GD0LXQvCDQuCDQstCw0LvQuNC00LjRgNGD0LXQvCDRgNC10LrQvtC80LXQvdC00LDRhtC40LgKICAgICAgICAgIHZhciBfMHgyNCA9IG5vcm1hbGl6ZVJlY29tbWVuZGF0aW9ucyhfMHgydSk7CgogICAgICAgICAgaWYgKCFfMHgyNCB8fCBfMHgyNC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKA==')"Не найдено валидных рекомендаций в ответе ИИ"_d('KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDQpNC+0YDQvNC40YDRg9C10Lwg0YTQuNC90LDQu9GM0L3Ri9C5INC+0LHRitC10LrRggogICAgICAgICAgdmFyIF8weDJ3ID0gewogICAgICAgICAgICBfMHgyNDogXzB4MjQsCiAgICAgICAgICB9OwoKICAgICAgICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQsiDQutC10YgKICAgICAgICAgIHNhdmVDYWNoZWREYXRhKF8weGQsIF8weDJlLCBfMHgydyk7CiAgICAgICAgICBjYWxsYmFjayhudWxsLCBfMHgydyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgLy8g0JXRgdC70Lgg0Y3RgtC+INC+0YjQuNCx0LrQsCDQv9Cw0YDRgdC40L3Qs9CwINC4INC10YHRgtGMINC/0L7Qv9GL0YLQutC4LCDQv9GA0L7QsdGD0LXQvCDQtdGJ0LUg0YDQsNC3CiAgICAgICAgICBpZiAocmV0cnlDb3VudCA8IF8weDJhKSB7CiAgICAgICAgICAgIF8weGEud2FybigKICAgICAgICAgICAgICA=')"Ошибка парсинга ответа ИИ(попытка "_d('ICsgKHJldHJ5Q291bnQgKyAxKSArIA==')"):"_d('LAogICAgICAgICAgICAgIGUubWVzc2FnZQogICAgICAgICAgICApOwogICAgICAgICAgICAvLyDQn9C+0LLRgtC+0YDRj9C10Lwg0LfQsNC/0YDQvtGBINGH0LXRgNC10Lcg0L3QtdCx0L7Qu9GM0YjRg9GOINC30LDQtNC10YDQttC60YMgKNGB0L7RhdGA0LDQvdGP0LXQvCBza2lwUmVzcG9uc2VGb3JtYXQpCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHF1ZXJ5QUkocHJvbXB0LCBjYWxsYmFjaywgcmV0cnlDb3VudCArIDEsIHNraXBSZXNwb25zZUZvcm1hdCk7CiAgICAgICAgICAgIH0sIDEwMDAgKiAocmV0cnlDb3VudCArIDEpKTsgLy8g0K3QutGB0L/QvtC90LXQvdGG0LjQsNC70YzQvdCw0Y8g0LfQsNC00LXRgNC20LrQsAogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FsbGJhY2soCiAgICAgICAgICAgICAgbmV3IEVycm9yKAogICAgICAgICAgICAgICAg')"Ошибка парсинга ответа ИИ после "_d('ICsKICAgICAgICAgICAgICAgICAgKF8weDJhICsgMSkgKwogICAgICAgICAgICAgICAgICA=')" попыток: "_d('ICsKICAgICAgICAgICAgICAgICAgZS5tZXNzYWdlCiAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIC8vINCV0YHQu9C4INGN0YLQviDRgdC10YLQtdCy0LDRjyDQvtGI0LjQsdC60LAg0Lgg0LXRgdGC0Ywg0L/QvtC/0YvRgtC60LgsINC/0YDQvtCx0YPQtdC8INC10YnQtSDRgNCw0LcKICAgICAgICBpZiAoCiAgICAgICAgICByZXRyeUNvdW50IDwgXzB4MmEgJiYKICAgICAgICAgIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKA==')"Failed to fetch"_d('KSB8fAogICAgICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKA==')"NetworkError"_d('KSkKICAgICAgICApIHsKICAgICAgICAgIF8weGEud2FybigKICAgICAgICAgICAg')"Сетевая ошибка(попытка "_d('ICsgKHJldHJ5Q291bnQgKyAxKSArIA==')"):"_d('LAogICAgICAgICAgICBlcnJvci5tZXNzYWdlCiAgICAgICAgICApOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHF1ZXJ5QUkocHJvbXB0LCBjYWxsYmFjaywgcmV0cnlDb3VudCArIDEsIHNraXBSZXNwb25zZUZvcm1hdCk7CiAgICAgICAgICB9LCAxMDAwICogKHJldHJ5Q291bnQgKyAxKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0pOwogIH0KCiAgLy8g0J/QvtC40YHQuiDRhNC40LvRjNC80L7QsiDQsiBUTURCCiAgZnVuY3Rpb24gc2VhcmNoSW5UTURCKF8weDI0LCBjYWxsYmFjaywgcHJvZ3Jlc3NDYWxsYmFjaykgewogICAgdmFyIF8weDJ4ID0gW107CiAgICB2YXIgXzB4MnkgPSAwOwogICAgdmFyIF8weDI2ID0gZ2V0TWF4UmVzdWx0cygpOwogICAgdmFyIF8weDMwID0gTWF0aC5taW4oXzB4MjQubGVuZ3RoLCBfMHgyNik7CiAgICB2YXIgXzB4MzEgPSBuZXcgTGFtcGEuUmVndWVzdCgpOwoKICAgIGlmIChfMHgzMCA9PT0gMCkgewogICAgICBjYWxsYmFjayhfMHgyeCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyDQo9Cy0LXQtNC+0LzQu9GP0LXQvCDQviDQvdCw0YfQsNC70LUg0L/QvtC40YHQutCwCiAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykgewogICAgICBwcm9ncmVzc0NhbGxiYWNrKHsKICAgICAgICBjdXJyZW50OiAwLAogICAgICAgIF8weDMwOiBfMHgzMCwKICAgICAgICB0aXRsZTog')""_d('LAogICAgICAgIHBoYXNlOiA=')"start"_d('LAogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcm9jZXNzSXRlbShfMHgyOCkgewogICAgICBpZiAoIV8weDI4IHx8ICFfMHgyOC50aXRsZSkgewogICAgICAgIGNoZWNrQ29tcGxldGUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vINCj0LLQtdC00L7QvNC70Y/QtdC8INC+INGC0LXQutGD0YnQtdC8INC/0YDQvtCz0YDQtdGB0YHQtQogICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykgewogICAgICAgIHByb2dyZXNzQ2FsbGJhY2soewogICAgICAgICAgY3VycmVudDogXzB4MnkgKyAxLAogICAgICAgICAgXzB4MzA6IF8weDMwLAogICAgICAgICAgdGl0bGU6IF8weDI4LnRpdGxlLAogICAgICAgICAgcGhhc2U6IA==')"searching"_d('LAogICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LrQtdGIICjQuNGB0L/QvtC70YzQt9GD0LXQvCDRhdC10Ygg0LTQu9GPINC/0L7QtNC00LXRgNC20LrQuCBVbmljb2RlL9C60LjRgNC40LvQu9C40YbRiykKICAgICAgdmFyIF8weDJlID0g')"tmdb_"_d('ICsgc2ltcGxlSGFzaChfMHgyOC50aXRsZSArIChfMHgyOC5fMHg1NyB8fCA=')""_d('KSk7CiAgICAgIHZhciBfMHgyZiA9IGdldENhY2hlZERhdGEoXzB4ZSwgXzB4MmUpOwogICAgICBpZiAoXzB4MmYpIHsKICAgICAgICBfMHgyeC5wdXNoKF8weDJmKTsKICAgICAgICBjaGVja0NvbXBsZXRlKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyDQmNGJ0LXQvCDRhNC40LvRjNC8CiAgICAgIHZhciBfMHgzNCA9IExhbXBhLlRNREIuYXBpKAogICAgICAgIA==')"search/_0x35?_0x4p="_d('ICsKICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChfMHgyOC50aXRsZSkgKwogICAgICAgICAgKF8weDI4Ll8weDU3ID8g')"&_0x57="_d('ICsgXzB4MjguXzB4NTcgOiA=')""_d('KSArCiAgICAgICAgICA=')"&api_key="_d('ICsKICAgICAgICAgIExhbXBhLlRNREIuXzB4MTEoKSArCiAgICAgICAgICA=')"&language=ru"_d('CiAgICAgICk7CgogICAgICBfMHgzMS5zaWxlbnQoCiAgICAgICAgXzB4MzQsCiAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEuXzB4MnggJiYgZGF0YS5fMHgyeC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhciBfMHgzNSA9IGRhdGEuXzB4MnhbMF07CiAgICAgICAgICAgIHZhciBfMHgydyA9IHsKICAgICAgICAgICAgICBpZDogXzB4MzUuaWQsCiAgICAgICAgICAgICAgdGl0bGU6IF8weDM1LnRpdGxlLAogICAgICAgICAgICAgIG9yaWdpbmFsX3RpdGxlOiBfMHgzNS5vcmlnaW5hbF90aXRsZSwKICAgICAgICAgICAgICBfMHg1OTogXzB4MzUuXzB4NTkgfHwg')""_d('LAogICAgICAgICAgICAgIHBvc3Rlcl9wYXRoOiBfMHgzNS5wb3N0ZXJfcGF0aCwKICAgICAgICAgICAgICBiYWNrZHJvcF9wYXRoOiBfMHgzNS5iYWNrZHJvcF9wYXRoLAogICAgICAgICAgICAgIHZvdGVfYXZlcmFnZTogXzB4MzUudm90ZV9hdmVyYWdlLAogICAgICAgICAgICAgIHJlbGVhc2VfZGF0ZTogXzB4MzUucmVsZWFzZV9kYXRlLAogICAgICAgICAgICAgIGFpX3JlYXNvbjogXzB4MjgucmVhc29uIHx8IA==')""_d('LAogICAgICAgICAgICAgIHR5cGU6IA==')"_0x35"_d('LAogICAgICAgICAgICB9OwogICAgICAgICAgICBfMHgyeC5wdXNoKF8weDJ3KTsKICAgICAgICAgICAgc2F2ZUNhY2hlZERhdGEoXzB4ZSwgXzB4MmUsIF8weDJ3KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vINCf0YDQvtCx0YPQtdC8INC90LDQudGC0Lgg0YHQtdGA0LjQsNC7CiAgICAgICAgICAgIHZhciBfMHgzNyA9IExhbXBhLlRNREIuYXBpKAogICAgICAgICAgICAgIA==')"search/_0x38?_0x4p="_d('ICsKICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChfMHgyOC50aXRsZSkgKwogICAgICAgICAgICAgICAgKF8weDI4Ll8weDU3ID8g')"&first_air_date_year="_d('ICsgXzB4MjguXzB4NTcgOiA=')""_d('KSArCiAgICAgICAgICAgICAgICA=')"&api_key="_d('ICsKICAgICAgICAgICAgICAgIExhbXBhLlRNREIuXzB4MTEoKSArCiAgICAgICAgICAgICAgICA=')"&language=ru"_d('CiAgICAgICAgICAgICk7CgogICAgICAgICAgICBfMHgzMS5zaWxlbnQoCiAgICAgICAgICAgICAgXzB4MzcsCiAgICAgICAgICAgICAgZnVuY3Rpb24gKHR2RGF0YSkgewogICAgICAgICAgICAgICAgaWYgKHR2RGF0YSAmJiB0dkRhdGEuXzB4MnggJiYgdHZEYXRhLl8weDJ4Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgdmFyIF8weDM4ID0gdHZEYXRhLl8weDJ4WzBdOwogICAgICAgICAgICAgICAgICB2YXIgXzB4MzkgPSB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IF8weDM4LmlkLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBfMHgzOC5uYW1lLAogICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsX3RpdGxlOiBfMHgzOC5vcmlnaW5hbF9uYW1lLAogICAgICAgICAgICAgICAgICAgIF8weDU5OiBfMHgzOC5fMHg1OSB8fCA=')""_d('LAogICAgICAgICAgICAgICAgICAgIHBvc3Rlcl9wYXRoOiBfMHgzOC5wb3N0ZXJfcGF0aCwKICAgICAgICAgICAgICAgICAgICBiYWNrZHJvcF9wYXRoOiBfMHgzOC5iYWNrZHJvcF9wYXRoLAogICAgICAgICAgICAgICAgICAgIHZvdGVfYXZlcmFnZTogXzB4Mzgudm90ZV9hdmVyYWdlLAogICAgICAgICAgICAgICAgICAgIHJlbGVhc2VfZGF0ZTogXzB4MzguZmlyc3RfYWlyX2RhdGUsCiAgICAgICAgICAgICAgICAgICAgYWlfcmVhc29uOiBfMHgyOC5yZWFzb24gfHwg')""_d('LAogICAgICAgICAgICAgICAgICAgIHR5cGU6IA==')"_0x38"_d('LAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBfMHgyeC5wdXNoKF8weDM5KTsKICAgICAgICAgICAgICAgICAgc2F2ZUNhY2hlZERhdGEoXzB4ZSwgXzB4MmUsIF8weDM5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNoZWNrQ29tcGxldGUoKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGNoZWNrQ29tcGxldGUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGNoZWNrQ29tcGxldGUoKTsKICAgICAgICB9LAogICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNoZWNrQ29tcGxldGUoKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tDb21wbGV0ZSgpIHsKICAgICAgXzB4MnkrKzsKICAgICAgaWYgKF8weDJ5ID49IF8weDMwKSB7CiAgICAgICAgLy8g0KPQstC10LTQvtC80LvRj9C10Lwg0L4g0LfQsNCy0LXRgNGI0LXQvdC40LgKICAgICAgICBpZiAocHJvZ3Jlc3NDYWxsYmFjaykgewogICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayh7CiAgICAgICAgICAgIGN1cnJlbnQ6IF8weDMwLAogICAgICAgICAgICBfMHgzMDogXzB4MzAsCiAgICAgICAgICAgIHRpdGxlOiA=')""_d('LAogICAgICAgICAgICBwaGFzZTog')"complete"_d('LAogICAgICAgICAgICBmb3VuZDogXzB4MngubGVuZ3RoLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhbGxiYWNrKF8weDJ4KTsKICAgICAgfQogICAgfQoKICAgIC8vINCe0LHRgNCw0LHQsNGC0YvQstCw0LXQvCDQstGB0LUg0YDQtdC60L7QvNC10L3QtNCw0YbQuNC4CiAgICBmb3IgKHZhciBfMHgxaiA9IDA7IF8weDFqIDwgXzB4MzA7IF8weDFqKyspIHsKICAgICAgcHJvY2Vzc0l0ZW0oXzB4MjRbXzB4MWpdKTsKICAgIH0KICB9CgogIC8vINCh0L7Qt9C00LDQvdC40LUg0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LAKICBmdW5jdGlvbiBjcmVhdGVTZWFyY2hNb2RhbCgpIHsKICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0L3QtSDQvtGC0LrRgNGL0YLQviDQu9C4INGD0LbQtSDQvNC+0LTQsNC70YzQvdC+0LUg0L7QutC90L4KICAgIHZhciBfMHgzYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Io')".ai-search-_0x3d"_d('KTsKICAgIGlmIChfMHgzYiAmJiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKF8weDNiKSkgewogICAgICAvLyDQldGB0LvQuCDQvtC60L3QviDRg9C20LUg0L7RgtC60YDRi9GC0L4sINC/0YDQvtGB0YLQviDQstC+0LfQstGA0LDRidCw0LXQvNGB0Y8KICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDRgdGC0LjQu9C4CiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKA==')"ai-search-styles"_d('KSkgewogICAgICB2YXIgXzB4M2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KA==')"_0x3c"_d('KTsKICAgICAgXzB4M2MuaWQgPSA=')"ai-search-styles"_d('OwogICAgICBfMHgzYy50ZXh0Q29udGVudCA9IGAKICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4M2QgewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjg1KTsKICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiAxMDAwMDsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1fMHgydDogY2VudGVyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgzZSB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzFhMWExYTsKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDI0cHg7CiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA2MDBweDsKICAgICAgICAgICAgICAgICAgICB3aWR0aDogOTAlOwogICAgICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDg1dmg7CiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWhlYWRlciB7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgICAgIGp1c3RpZnktXzB4MnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtaGVhZGVyIGgyIHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBnYXA6IDhweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtaGVhZGVyIGgyIHN2ZyB7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDMycHg7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzMnB4OwogICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1jbG9zZSB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTsKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAyOHB4OwogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzMnB4OwogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzJweDsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1fMHgydDogY2VudGVyOwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtY2xvc2U6aG92ZXIgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4M2ktZ3JvdXAgewogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weDNpLWdyb3VwIGxhYmVsIHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4M2ktd3JhcHBlciB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgzaSB7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTJweDsKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjNDQ0OwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMmEyYTJhOwogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgzaTpmb2N1cyB7CiAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weG8tZHJvcGRvd24gewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgICAgICAgICB0b3A6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgICAgICAgICByaWdodDogMDsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA0cHg7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzFhMWExYTsKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjNDQ0OwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAzMDBweDsKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDEwMDAxOwogICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHhvLWhlYWRlciB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LV8weDJ0OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAxMnB4OwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNDQ0OwogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjYWFhOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHhvLWNsZWFyLWFsbCB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTsKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNhYWE7CiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4OwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgICAgICAgICBfMHgyMi1oZWlnaHQ6IDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weG8tY2xlYXItYWxsOmhvdmVyIHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weG8taXRlbXMgewogICAgICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDI1MHB4OwogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weG8tXzB4MTIgewogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1fMHgydDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTJweDsKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMyYTJhMmE7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4yczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4by1fMHgxMjpob3ZlciB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzJhMmEyYTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4by1fMHgxMjpsYXN0LWNoaWxkIHsKICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHhvLV8weDEyLXRleHQgewogICAgICAgICAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHhvLV8weDEyLWRlbGV0ZSB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogbm9uZTsKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM4ODg7CiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4OwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgICAgICAgICAgICBfMHgyMi1oZWlnaHQ6IDE7CiAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weG8tXzB4MTItZGVsZXRlOmhvdmVyIHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMCwgMCwgMC4yKTsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmNmI2YjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4by1lbXB0eSB7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM4ODg7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1idXR0b25zIHsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgICAgIGdhcDogMTBweDsKICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LV8weDJ0OiBmbGV4LWVuZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtYnRuIHsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWJ0bi1jYW5jZWwgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0NDQ7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWJ0bi1jYW5jZWw6aG92ZXIgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICM1NTU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWJ0bi1zdWJtaXQgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzhCNUNGNiwgIzA2QjZENCk7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWJ0bi1zdWJtaXQ6aG92ZXIgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzdDM0FFRCwgIzA4OTFCMik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWJ0bi1zdWJtaXQ6ZGlzYWJsZWQgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICM1NTU7CiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtYnRuLnNlbGVjdG9yLAogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgydy1fMHgxMi5zZWxlY3RvciB7CiAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtYnRuLnNlbGVjdG9yLmZvY3VzLAogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgydy1fMHgxMi5zZWxlY3Rvci5mb2N1cyB7CiAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogM3B4IHNvbGlkICMwMDdiZmY7CiAgICAgICAgICAgICAgICAgICAgb3V0bGluZS1vZmZzZXQ6IDJweDsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMzMzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1idG4tY2FuY2VsLnNlbGVjdG9yLmZvY3VzIHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNTU1OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1idG4tc3VibWl0LnNlbGVjdG9yLmZvY3VzIHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICM3QzNBRUQsICMwODkxQjIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgzaS5zZWxlY3Rvci5mb2N1cyB7CiAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogM3B4IHNvbGlkICMwMDdiZmY7CiAgICAgICAgICAgICAgICAgICAgb3V0bGluZS1vZmZzZXQ6IDJweDsKICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWxvYWRpbmcgewogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA0MHB4IDIwcHg7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWxvYWRpbmctdGV4dCB7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLXByb2dyZXNzLWluZm8gewogICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDE1cHg7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjYWFhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1wcm9ncmVzcy1iYXIgewogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgICAgIGhlaWdodDogNnB4OwogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICMzMzM7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTVweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtcHJvZ3Jlc3MtZmlsbCB7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzAwN2JmZiwgIzAwNTZiMyk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlOwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtZG90cyB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LV8weDJ0OiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgZ2FwOiA4cHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWRvdCB7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEycHg7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMnB4OwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDA3YmZmOwogICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogYWktc2VhcmNoLXB1bHNlIDEuNHMgaW5maW5pdGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWRvdDpudGgtY2hpbGQoMikgewogICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi1kZWxheTogMC4yczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtZG90Om50aC1jaGlsZCgzKSB7CiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLWRlbGF5OiAwLjRzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgQGtleWZyYW1lcyBhaS1zZWFyY2gtcHVsc2UgewogICAgICAgICAgICAgICAgICAgIDAlLCA4MCUsIDEwMCUgewogICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjM7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC44KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgNDAlIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weDJ4IHsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgyeC10aXRsZSB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4OwogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weDJ3LV8weDEyIHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMmEyYTJhOwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNnB4OwogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgICAgICBnYXA6IDE2cHg7CiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycywgb3V0bGluZSAwLjJzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgydy1fMHgxMjpob3ZlciB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzMzMzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4by1fMHgxMi5zZWxlY3Rvci5mb2N1cyB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzMzMzsKICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiAycHggc29saWQgIzAwN2JmZjsKICAgICAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogLTJweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtY2xvc2Uuc2VsZWN0b3IuZm9jdXMgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiAycHggc29saWQgIzAwN2JmZjsKICAgICAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogMnB4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgydy1wb3N0ZXIgewogICAgICAgICAgICAgICAgICAgIHdpZHRoOiA4MHB4OwogICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTIwcHg7CiAgICAgICAgICAgICAgICAgICAgbWluLXdpZHRoOiA4MHB4OwogICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEyMHB4OwogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0NDQ7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvdmVyOwogICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgydy1wb3N0ZXIgaW1nIHsKICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgydy1pbmZvIHsKICAgICAgICAgICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHgydy10aXRsZSB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4MnctbWV0YSB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNhYWE7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4MnctXzB4NTggewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZkNzAwOwogICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4MnctXzB4NTkgewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZGRkOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgICAgICAgICBfMHgyMi1oZWlnaHQ6IDEuNTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtZXJyb3IgewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICM0YTFhMWE7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZmNmI2YjsKICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTZweDsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmNmI2YjsKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLWVtcHR5IHsKICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNDBweCAyMHB4OwogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjYWFhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHhvLXBlcm1hbmVudCB7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHhvLXBlcm1hbmVudC10aXRsZSB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC5haS1zZWFyY2gtXzB4by1wZXJtYW5lbnQtbGlzdCB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgICAgICAgICAgICAgZ2FwOiA4cHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weG8tcGVybWFuZW50LV8weDEyIHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMmEyYTJhOwogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM0NDQ7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4OwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4OwogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzLCBib3JkZXItY29sb3IgMC4yczsKICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHhvLXBlcm1hbmVudC1fMHgxMjpob3ZlciB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzMzMzsKICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAuYWktc2VhcmNoLV8weG8tcGVybWFuZW50LV8weDEyLnNlbGVjdG9yLmZvY3VzIHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMzMzOwogICAgICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzAwN2JmZjsKICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiAycHggc29saWQgIzAwN2JmZjsKICAgICAgICAgICAgICAgICAgICBvdXRsaW5lLW9mZnNldDogMnB4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLmFpLXNlYXJjaC1fMHhvLXBlcm1hbmVudC1lbXB0eSB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM4ODg7CiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGA7CiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoXzB4M2MpOwogICAgfQoKICAgIC8vINCh0L7Qt9C00LDQtdC8INC80L7QtNCw0LvRjNC90L7QtSDQvtC60L3QvgogICAgdmFyIF8weDNkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCg=')"div"_d('KTsKICAgIF8weDNkLmNsYXNzTmFtZSA9IA==')"ai-search-_0x3d"_d('OwogICAgLy8g0JHQu9C+0LrQuNGA0YPQtdC8INGB0L7QsdGL0YLQuNGPINC00LvRjyDQvtGB0L3QvtCy0L3QvtCz0L4g0L/RgNC40LvQvtC20LXQvdC40Y8KICAgIF8weDNkLnNldEF0dHJpYnV0ZSg=')"data-_0x3e-active","_d('dHJ1ZQ==')"_d('KTsKICAgIF8weDNkLl8weDNjLnBvaW50ZXJFdmVudHMgPSA=')"auto"_d('OwoKICAgIHZhciBfMHgzZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo')"div"_d('KTsKICAgIF8weDNlLmNsYXNzTmFtZSA9IA==')"ai-search-_0x3e"_d('OwogICAgXzB4M2Uuc2V0QXR0cmlidXRlKA==')"data-_0x3e-_0x2t","_d('dHJ1ZQ==')"_d('KTsKCiAgICBfMHgzZS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9')"ai-search-header"_d('PgogICAgICAgICAgICAgICAgPGgyPiR7XzB4Yn0g0J/QvtC40YHQuiDRhNC40LvRjNC80L7QsjwvaDI+CiAgICAgICAgICAgICAgICA8XzB4NW0gY2xhc3M9')"ai-search-close selector"_d('IHRhYmluZGV4PQ==')"-1"_d('PiZ0aW1lczs8L18weDVtPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0=')"ai-search-body"_d('PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0=')"ai-search-_0x3i-group"_d('PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD7QntC/0LjRiNC40YLQtSwg0YfRgtC+INCy0Ysg0YXQvtGC0LjRgtC1INC/0L7RgdC80L7RgtGA0LXRgtGMOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0=')"ai-search-_0x3i-wrapper"_d('PgogICAgICAgICAgICAgICAgICAgICAgICA8XzB4M2kgdHlwZT0=')"text"_d('IGNsYXNzPQ==')"ai-search-_0x3i selector"_d('IGlkPQ==')"ai-search-_0x4p"_d('IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9')"Например: кино про любовь,фантастика про космос,комедии 90-х..."_d('IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlPQ==')"off"_d('IHRhYmluZGV4PQ==')"0"_d('CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dG1vZGU9')"text"_d('CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRlcmtleWhpbnQ9')"search"_d('PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPQ==')"ai-search-loading"_d('IF8weDNjPQ==')"_d('ZGlzcGxheTogbm9uZTs=')"_d('PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9')"_d('YWktc2VhcmNoLWxvYWRpbmctdGV4dA==')"_d('PtCY0Jgg0LDQvdCw0LvQuNC30LjRgNGD0LXRgiDQstCw0Ygg0LfQsNC/0YDQvtGBLi4uPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0=')"_d('YWktc2VhcmNoLWRvdHM=')"_d('PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPQ==')"_d('YWktc2VhcmNoLWRvdA==')"_d('PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPQ==')"_d('YWktc2VhcmNoLWRvdA==')"_d('PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPQ==')"_d('YWktc2VhcmNoLWRvdA==')"_d('PjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9')"_d('YWktc2VhcmNoLXByb2dyZXNzLWJhcg==')"_d('IF8weDNjPQ==')"_d('ZGlzcGxheTogbm9uZTs=')"_d('PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPQ==')"_d('YWktc2VhcmNoLXByb2dyZXNzLWZpbGw=')"_d('IF8weDNjPQ==')"_d('d2lkdGg6IDAlOw==')"_d('PjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9')"_d('YWktc2VhcmNoLXByb2dyZXNzLWluZm8=')"_d('PjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPQ==')"ai-search-_0xo-permanent"_d('PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9')"ai-search-_0xo-permanent-title"_d('PtCY0YHRgtC+0YDQuNGPINC/0L7QuNGB0LrQsDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9')"ai-search-_0xo-permanent-list"_d('IGlkPQ==')"ai-search-_0xo-permanent-list"_d('PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPQ==')"ai-search-buttons"_d('PgogICAgICAgICAgICAgICAgICAgIDxfMHg1bSBjbGFzcz0=')"ai-search-btn ai-search-btn-cancel selector"_d('IHRhYmluZGV4PQ==')"-1"_d('PtCe0YLQvNC10L3QsDwvXzB4NW0+CiAgICAgICAgICAgICAgICAgICAgPF8weDVtIGNsYXNzPQ==')"ai-search-btn ai-search-btn-submit selector"_d('IHRhYmluZGV4PQ==')"-1"_d('PtCd0LDQudGC0Lg8L18weDVtPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPQ==')"ai-search-_0x2x"_d('IF8weDNjPQ==')"_d('ZGlzcGxheTogbm9uZTs=')"_d('PjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICBgOwoKICAgIF8weDNkLmFwcGVuZENoaWxkKF8weDNlKTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoXzB4M2QpOwoKICAgIC8vINCt0LvQtdC80LXQvdGC0YsKICAgIHZhciBfMHgzZiA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-close"_d('KTsKICAgIHZhciBfMHgzZyA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-btn-cancel"_d('KTsKICAgIHZhciBfMHgzaCA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-btn-submit"_d('KTsKICAgIHZhciBfMHgzaSA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')"#ai-search-_0x4p"_d('KTsKICAgIHZhciBfMHgzaiA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-loading"_d('KTsKICAgIHZhciBfMHgzayA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-_0x2x"_d('KTsKICAgIHZhciBfMHgzbCA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-_0x3i-group"_d('KTsKICAgIHZhciBfMHgzbSA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-buttons"_d('KTsKICAgIHZhciBfMHgzbiA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-progress-bar"_d('KTsKICAgIHZhciBfMHgzbyA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-progress-fill"_d('KTsKICAgIHZhciBfMHgzcCA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-progress-info"_d('KTsKICAgIHZhciBfMHgzcSA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-loading-text"_d('KTsKICAgIHZhciBfMHgzciA9IF8weDNlLnF1ZXJ5U2VsZWN0b3Io')".ai-search-dots"_d('KTsKICAgIHZhciBfMHgzcyA9IF8weDNlLnF1ZXJ5U2VsZWN0b3IoCiAgICAgIA==')"#ai-search-_0xo-permanent-list"_d('CiAgICApOwoKICAgIC8vINCf0LXRgNC10LzQtdC90L3Ri9C1INC00LvRjyDQvdCw0LLQuNCz0LDRhtC40LgKICAgIHZhciBfMHgzdCA9IG51bGw7CiAgICB2YXIgXzB4M3UgPSBudWxsOwoKICAgIC8vINCk0YPQvdC60YbQuNGPINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC/0L7RgdGC0L7Rj9C90L3QvtC5INC40YHRgtC+0YDQuNC4INC/0L7QuNGB0LrQsAogICAgZnVuY3Rpb24gc2hvd1Blcm1hbmVudEhpc3RvcnkoKSB7CiAgICAgIGlmICghXzB4M3MpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBfMHhvID0gZ2V0U2VhcmNoSGlzdG9yeSgpOwoKICAgICAgaWYgKF8weG8ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgXzB4M3MuaW5uZXJIVE1MID0KICAgICAgICAgICc8ZGl2IGNsYXNzPQ==')"ai-search-_0xo-permanent-empty"_d('PtCY0YHRgtC+0YDQuNGPINC/0L7QuNGB0LrQsCDQv9GD0YHRgtCwPC9kaXY+JzsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBfMHgzdyA9IA==')""_d('OwogICAgICBfMHhvLmZvckVhY2goZnVuY3Rpb24gKF8weDRwKSB7CiAgICAgICAgdmFyIF8weDN4ID0gXzB4NHAucmVwbGFjZSgv')"/g,"_d('JnF1b3Q7')").replace(/"_d('L2csICImIzM5OyIpOwogICAgICAgIF8weDN3ICs9CiAgICAgICAgICA=')"<div class="_d('YWktc2VhcmNoLV8weG8tcGVybWFuZW50LV8weDEyIHNlbGVjdG9y')" data-_0x4p="_d('JyArCiAgICAgICAgICBfMHgzeCArCiAgICAgICAgICAn')"_d('IHRhYmluZGV4PQ==')"-1" title="_d('JyArCiAgICAgICAgICBfMHgzeCArCiAgICAgICAgICAn')">"_d('ICsKICAgICAgICAgIF8weDRwICsKICAgICAgICAgICI8L2Rpdj4iOwogICAgICB9KTsKCiAgICAgIF8weDNzLmlubmVySFRNTCA9IF8weDN3OwoKICAgICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0LTQu9GPINGN0LvQtdC80LXQvdGC0L7QsiDQv9C+0YHRgtC+0Y/QvdC90L7QuSDQuNGB0YLQvtGA0LjQuAogICAgICB2YXIgXzB4M3kgPSBfMHgzcy5xdWVyeVNlbGVjdG9yQWxsKAogICAgICAgICIuYWktc2VhcmNoLV8weG8tcGVybWFuZW50LV8weDEyIgogICAgICApOwogICAgICBfMHgzeS5mb3JFYWNoKGZ1bmN0aW9uIChfMHgxMikgewogICAgICAgIHZhciBfMHgzeiA9IF8weDEyLmdldEF0dHJpYnV0ZSgiZGF0YS1fMHg0cCIpOwoKICAgICAgICAvLyDQmtC70LjQuiDQv9C+INGN0LvQtdC80LXQvdGC0YMgLSDQstGL0L/QvtC70L3Rj9C10Lwg0L/QvtC40YHQugogICAgICAgIF8weDEyLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICBpZiAoXzB4M2kpIHsKICAgICAgICAgICAgXzB4M2kudmFsdWUgPSBfMHgzejsKICAgICAgICAgIH0KICAgICAgICAgIHBlcmZvcm1TZWFyY2goKTsKICAgICAgICB9KTsKCiAgICAgICAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPIFRWINC/0YPQu9GM0YLQsAogICAgICAgIGlmICh0eXBlb2YgJCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICQoXzB4MTIpLm9uKCJob3ZlcjplbnRlciIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF8weDNpKSB7CiAgICAgICAgICAgICAgXzB4M2kudmFsdWUgPSBfMHgzejsKICAgICAgICAgICAgfQogICAgICAgICAgICBwZXJmb3JtU2VhcmNoKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INC90LDQstC40LPQsNGG0LjRjiDQv9C+0YHQu9C1INC+0LHQvdC+0LLQu9C10L3QuNGPINC/0L7RgdGC0L7Rj9C90L3QvtC5INC40YHRgtC+0YDQuNC4CiAgICAgIGlmIChfMHgzdCkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgdXBkYXRlTmF2aWdhdGlvbigpOwogICAgICAgIH0sIDUwKTsKICAgICAgfQogICAgfQoKICAgIC8vINCk0YPQvdC60YbQuNGPINC30LDQutGA0YvRgtC40Y8KICAgIGZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7CiAgICAgIC8vINCh0L3QsNGH0LDQu9CwINCy0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQv9GA0LXQtNGL0LTRg9GJ0LjQuSDQutC+0L3RgtGA0L7Qu9C70LXRgCDQlNCeINGD0LTQsNC70LXQvdC40Y8gXzB4M2QKICAgICAgaWYgKF8weDN0ICYmIExhbXBhICYmIExhbXBhLkNvbnRyb2xsZXIpIHsKICAgICAgICB0cnkgewogICAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC40LzRjyDQv9GA0LXQtNGL0LTRg9GJ0LXQs9C+INC60L7QvdGC0YDQvtC70LvQtdGA0LAg0L/QtdGA0LXQtCDRg9C00LDQu9C10L3QuNC10LwKICAgICAgICAgIHZhciBfMHg0MCA9IF8weDN1OwoKICAgICAgICAgIC8vINCe0YfQuNGJ0LDQtdC8INC60L7Qu9C70LXQutGG0LjRjiBOYXZpZ2F0b3Ig0L/QtdGA0LXQtCDRg9C00LDQu9C10L3QuNC10Lwg0LrQvtC90YLRgNC+0LvQu9C10YDQsAogICAgICAgICAgaWYgKHR5cGVvZiBOYXZpZ2F0b3IgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBOYXZpZ2F0b3Iuc2V0Q29sbGVjdGlvbiA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgTmF2aWdhdG9yLnNldENvbGxlY3Rpb24oW10pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodHlwZW9mIE5hdmlnYXRvci51bmZvY3VzID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBOYXZpZ2F0b3IudW5mb2N1cygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIC8vINCY0LPQvdC+0YDQuNGA0YPQtdC8INC+0YjQuNCx0LrQuCBOYXZpZ2F0b3IKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vINCj0LTQsNC70Y/QtdC8INC60L7QvdGC0YDQvtC70LvQtdGAINC90LDQstC40LPQsNGG0LjQuAogICAgICAgICAgTGFtcGEuQ29udHJvbGxlci5yZW1vdmUoImFpX3NlYXJjaF9tb2RhbCIpOwoKICAgICAgICAgIC8vINCd0LXQsdC+0LvRjNGI0LDRjyDQt9Cw0LTQtdGA0LbQutCwINC/0LXRgNC10LQg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjQtdC8INC00LvRjyDQs9Cw0YDQsNC90YLQuNC4INGD0LTQsNC70LXQvdC40Y8KICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyDQktC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0L/RgNC10LTRi9C00YPRidC40Lkg0LrQvtC90YLRgNC+0LvQu9C10YAKICAgICAgICAgICAgaWYgKF8weDQwKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vINCf0LXRgNC10LrQu9GO0YfQsNC10LzRgdGPINC90LAg0L/RgNC10LTRi9C00YPRidC40Lkg0LrQvtC90YLRgNC+0LvQu9C10YAKICAgICAgICAgICAgICAgIExhbXBhLkNvbnRyb2xsZXIudG9nZ2xlKF8weDQwKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBfMHhhLndhcm4oItCe0YjQuNCx0LrQsCDQv9GA0Lgg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjQuCDQutC+0L3RgtGA0L7Qu9C70LXRgNCwOiIsIGUpOwogICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sg0L3QsCA=')"_0x2t"_d('CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBMYW1wYS5Db250cm9sbGVyLnRvZ2dsZSgiXzB4MnQiKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7CiAgICAgICAgICAgICAgICAgIC8vINCY0LPQvdC+0YDQuNGA0YPQtdC8INC+0YjQuNCx0LrRgwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDQldGB0LvQuCDQv9GA0LXQtNGL0LTRg9GJ0LjQuSDQutC+0L3RgtGA0L7Qu9C70LXRgCDQvdC1INCx0YvQuyDRgdC+0YXRgNCw0L3QtdC9LCDQv9GA0L7QsdGD0LXQvCDQsNC60YLQuNCy0LjRgNC+0LLQsNGC0Ywg')"_0x2t"_d('CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIExhbXBhLkNvbnRyb2xsZXIudG9nZ2xlKCJfMHgydCIpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIC8vINCY0LPQvdC+0YDQuNGA0YPQtdC8INC+0YjQuNCx0LrRgwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgMTApOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIF8weGEud2Fybigi0J7RiNC40LHQutCwINC/0YDQuCDRg9C00LDQu9C10L3QuNC4INC60L7QvdGC0YDQvtC70LvQtdGA0LA6IiwgZSk7CiAgICAgICAgICAvLyBGYWxsYmFjayDQvdCwIA==')"_0x2t"_d('CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBMYW1wYS5Db250cm9sbGVyLnRvZ2dsZSgiXzB4MnQiKTsKICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7CiAgICAgICAgICAgIC8vINCY0LPQvdC+0YDQuNGA0YPQtdC8INC+0YjQuNCx0LrRgwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8g0KPQtNCw0LvRj9C10Lwg0L7QsdGA0LDQsdC+0YLRh9C40Log0L/RgNC+0LrRgNGD0YLQutC4IE5hdmlnYXRvciDQv9GA0Lgg0LfQsNC60YDRi9GC0LjQuAogICAgICBpZiAoCiAgICAgICAgdHlwZW9mIE5hdmlnYXRvciAhPT0gInVuZGVmaW5lZCIgJiYKICAgICAgICBOYXZpZ2F0b3IuX2FpU2VhcmNoU2Nyb2xsSGFuZGxlcgogICAgICApIHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKHR5cGVvZiBOYXZpZ2F0b3IudW5mb2xsb3cgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgTmF2aWdhdG9yLnVuZm9sbG93KCJmb2N1cyIsIE5hdmlnYXRvci5fYWlTZWFyY2hTY3JvbGxIYW5kbGVyKTsKICAgICAgICAgIH0KICAgICAgICAgIE5hdmlnYXRvci5fYWlTZWFyY2hTY3JvbGxIYW5kbGVyID0gbnVsbDsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAvLyDQmNCz0L3QvtGA0LjRgNGD0LXQvCDQvtGI0LjQsdC60LgKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vINCj0LTQsNC70Y/QtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YHQvtCx0YvRgtC40Lkg0LrQu9Cw0LLQuNCw0YLRg9GA0YsKICAgICAgaWYgKF8weDNkICYmIF8weDNkLl9haVNlYXJjaEtleUhhbmRsZXIpIHsKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICJrZXlkb3duIiwKICAgICAgICAgIF8weDNkLl9haVNlYXJjaEtleUhhbmRsZXIsCiAgICAgICAgICB0cnVlCiAgICAgICAgKTsKICAgICAgICBfMHgzZC5fYWlTZWFyY2hLZXlIYW5kbGVyID0gbnVsbDsKICAgICAgfQoKICAgICAgXzB4M3QgPSBudWxsOwogICAgICBfMHgzdSA9IG51bGw7CgogICAgICAvLyDQmNGJ0LXQvCBfMHgzZCDQv9C+INC60LvQsNGB0YHRgyDQvdCwINGB0LvRg9GH0LDQuSwg0LXRgdC70Lgg0YHRgdGL0LvQutCwINC/0L7RgtC10YDRj9C70LDRgdGMCiAgICAgIHZhciBfMHg0MSA9IF8weDNkOwogICAgICBpZiAoIV8weDQxIHx8ICFkb2N1bWVudC5ib2R5LmNvbnRhaW5zKF8weDQxKSkgewogICAgICAgIF8weDQxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmFpLXNlYXJjaC1fMHgzZCIpOwogICAgICB9CgogICAgICBpZiAoXzB4NDEgJiYgZG9jdW1lbnQuYm9keS5jb250YWlucyhfMHg0MSkpIHsKICAgICAgICAvLyDQndC10LzQtdC00LvQtdC90L3QviDRgdC60YDRi9Cy0LDQtdC8INC4INGD0LTQsNC70Y/QtdC8CiAgICAgICAgXzB4NDEuXzB4M2MuZGlzcGxheSA9ICJub25lIjsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKF8weDQxKSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoXzB4NDEpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgLy8g0JXRgdC70Lgg0L3QtSDRg9C00LDQu9C+0YHRjCDRg9C00LDQu9C40YLRjCwg0L/RgNC+0YHRgtC+INGB0LrRgNGL0LLQsNC10LwKICAgICAgICAgICAgICBfMHg0MS5fMHgzYy5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgNTApOwogICAgICB9CiAgICB9CgogICAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCDQt9Cw0LrRgNGL0YLQuNGPCiAgICBfMHgzZi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGNsb3NlTW9kYWwpOwogICAgXzB4M2cuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBjbG9zZU1vZGFsKTsKCiAgICAvLyDQntCx0YDQsNCx0L7RgtGH0LjQutC4INC00LvRjyBUViDQv9GD0LvRjNGC0LAKICAgIGlmICh0eXBlb2YgJCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgJChfMHgzZikub24oImhvdmVyOmVudGVyIiwgY2xvc2VNb2RhbCk7CiAgICAgICQoXzB4M2cpLm9uKCJob3ZlcjplbnRlciIsIGNsb3NlTW9kYWwpOwogICAgfQoKICAgIF8weDNkLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUuXzB4NnkgPT09IF8weDNkKSB7CiAgICAgICAgY2xvc2VNb2RhbCgpOwogICAgICB9CiAgICB9KTsKCiAgICAvLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0L/QvtC60LDQt9CwINC60LvQsNCy0LjQsNGC0YPRgNGLINC90LAgVFYgKNC+0YHQvtCx0LXQvdC90L4gQW5kcm9pZCBUVikKICAgIC8vINCe0L/RgNC10LTQtdC70Y/QtdC8INC90LAg0YPRgNC+0LLQvdC1INGE0YPQvdC60YbQuNC4IGNyZWF0ZVNlYXJjaE1vZGFsLCDRh9GC0L7QsdGLINCx0YvQu9CwINC00L7RgdGC0YPQv9C90LAg0LLQtdC30LTQtQogICAgZnVuY3Rpb24gc2hvd0tleWJvYXJkKCkgewogICAgICBpZiAoIV8weDNpKSByZXR1cm47CgogICAgICAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRhNC+0LrRg9GBINC90LAg0L/QvtC70LUg0LLQstC+0LTQsAogICAgICBfMHgzaS5mb2N1cygpOwoKICAgICAgLy8g0JTQu9GPIEFuZHJvaWQgVFYg0LjRgdC/0L7Qu9GM0LfRg9C10Lwg0YHQv9C10YbQuNCw0LvRjNC90YvQuSDQvNC10YLQvtC0INC10YHQu9C4INC00L7RgdGC0YPQv9C10L0KICAgICAgaWYgKExhbXBhICYmIExhbXBhLlBsYXRmb3JtICYmIExhbXBhLlBsYXRmb3JtLmlzKCJhbmRyb2lkIikpIHsKICAgICAgICAvLyDQn9GA0L7QsdGD0LXQvCDQv9C+0LrQsNC30LDRgtGMINC60LvQsNCy0LjQsNGC0YPRgNGDINGH0LXRgNC10LcgQW5kcm9pZCBBUEkKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKAogICAgICAgICAgICBMYW1wYS5BbmRyb2lkICYmCiAgICAgICAgICAgIHR5cGVvZiBMYW1wYS5BbmRyb2lkLnNob3dLZXlib2FyZCA9PT0gImZ1bmN0aW9uIgogICAgICAgICAgKSB7CiAgICAgICAgICAgIExhbXBhLkFuZHJvaWQuc2hvd0tleWJvYXJkKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICB3aW5kb3cuQW5kcm9pZCAmJgogICAgICAgICAgICB0eXBlb2Ygd2luZG93LkFuZHJvaWQuc2hvd0tleWJvYXJkID09PSAiZnVuY3Rpb24iCiAgICAgICAgICApIHsKICAgICAgICAgICAgd2luZG93LkFuZHJvaWQuc2hvd0tleWJvYXJkKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgXzB4YS53YXJuKCLQndC1INGD0LTQsNC70L7RgdGMINC/0L7QutCw0LfQsNGC0Ywg0LrQu9Cw0LLQuNCw0YLRg9GA0YMg0YfQtdGA0LXQtyBBbmRyb2lkIEFQSToiLCBlKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vINCU0L7Qv9C+0LvQvdC40YLQtdC70YzQvdCw0Y8g0L/QvtC/0YvRgtC60LAg0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0YTQvtC60YPRgSDRgSDQt9Cw0LTQtdGA0LbQutC+0LkKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF8weDNpKSB7CiAgICAgICAgICBfMHgzaS5mb2N1cygpOwogICAgICAgICAgLy8g0J/RgNC+0LHRg9C10Lwg0LLRi9C30LLQsNGC0Ywg0YHQvtCx0YvRgtC40LUgY2xpY2sg0LTQu9GPINCz0LDRgNCw0L3RgtC40Lgg0L/QvtC60LDQt9CwINC60LvQsNCy0LjQsNGC0YPRgNGLCiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgXzB4NDIgPSBuZXcgTW91c2VFdmVudCgiY2xpY2siLCB7CiAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwKICAgICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLAogICAgICAgICAgICAgIHZpZXc6IHdpbmRvdywKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF8weDNpLmRpc3BhdGNoRXZlbnQoXzB4NDIpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAvLyDQmNCz0L3QvtGA0LjRgNGD0LXQvCDQvtGI0LjQsdC60YMKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIDEwMCk7CiAgICB9CgogICAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40LogRW50ZXIg0LIg0L/QvtC70LUg0LLQstC+0LTQsAogICAgaWYgKF8weDNpKSB7CiAgICAgIF8weDNpLmFkZEV2ZW50TGlzdGVuZXIoImtleXByZXNzIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoZS5fMHgxMSA9PT0gIkVudGVyIikgewogICAgICAgICAgcGVyZm9ybVNlYXJjaCgpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyDQntCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC00LvRjyDQv9C+0LrQsNC30LAg0LrQu9Cw0LLQuNCw0YLRg9GA0YsgKNGC0L7Qu9GM0LrQviDQv9GA0Lgg0Y/QstC90L7QvCDQtNC10LnRgdGC0LLQuNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjykKICAgICAgXzB4M2kuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2hvd0tleWJvYXJkKCk7CiAgICAgIH0pOwoKICAgICAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPIFRWINC/0YPQu9GM0YLQsCAoaG92ZXI6ZW50ZXIpIC0g0YLQvtC70YzQutC+INC/0YDQuCDRj9Cy0L3QvtC8INC90LDQttCw0YLQuNC4IEVudGVyCiAgICAgIGlmICh0eXBlb2YgJCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAkKF8weDNpKS5vbigiaG92ZXI6ZW50ZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzaG93S2V5Ym9hcmQoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIC8vINCk0YPQvdC60YbQuNGPINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDQvdCw0LLQuNCz0LDRhtC40LgKICAgIGZ1bmN0aW9uIHVwZGF0ZU5hdmlnYXRpb24oKSB7CiAgICAgIGlmICghTGFtcGEgfHwgIUxhbXBhLkNvbnRyb2xsZXIgfHwgIV8weDN0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LLRgdC1INGN0LvQtdC80LXQvdGC0Ysg0LTQu9GPINC90LDQstC40LPQsNGG0LjQuAogICAgICAgIHZhciBfMHg0MyA9IFtdOwoKICAgICAgICAvLyDQmtC90L7Qv9C60LAg0LfQsNC60YDRi9GC0LjRjwogICAgICAgIGlmIChfMHgzZiAmJiBfMHgzZi5vZmZzZXRQYXJlbnQgIT09IG51bGwpIHsKICAgICAgICAgIF8weDQzLnB1c2goXzB4M2YpOwogICAgICAgIH0KCiAgICAgICAgLy8g0J/QvtC70LUg0LLQstC+0LTQsCAo0LXRgdC70Lgg0LLQuNC00LjQvNC+KQogICAgICAgIGlmICgKICAgICAgICAgIF8weDNpICYmCiAgICAgICAgICBfMHgzbCAmJgogICAgICAgICAgXzB4M2wuXzB4M2MuZGlzcGxheSAhPT0gIm5vbmUiICYmCiAgICAgICAgICBfMHgzaS5vZmZzZXRQYXJlbnQgIT09IG51bGwKICAgICAgICApIHsKICAgICAgICAgIF8weDQzLnB1c2goXzB4M2kpOwogICAgICAgIH0KCiAgICAgICAgLy8g0JrQvdC+0L/QutC4INC00LXQudGB0YLQstC40LkgKNC10YHQu9C4INCy0LjQtNC90YspCiAgICAgICAgaWYgKF8weDNtICYmIF8weDNtLl8weDNjLmRpc3BsYXkgIT09ICJub25lIikgewogICAgICAgICAgaWYgKF8weDNnICYmIF8weDNnLm9mZnNldFBhcmVudCAhPT0gbnVsbCkgewogICAgICAgICAgICBfMHg0My5wdXNoKF8weDNnKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgKICAgICAgICAgICAgXzB4M2ggJiYKICAgICAgICAgICAgXzB4M2gub2Zmc2V0UGFyZW50ICE9PSBudWxsICYmCiAgICAgICAgICAgICFfMHgzaC5kaXNhYmxlZAogICAgICAgICAgKSB7CiAgICAgICAgICAgIF8weDQzLnB1c2goXzB4M2gpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g0KDQtdC30YPQu9GM0YLQsNGC0Ysg0L/QvtC40YHQutCwICjQtdGB0LvQuCDQstC40LTQvdGLKQogICAgICAgIGlmIChfMHgzayAmJiBfMHgzay5fMHgzYy5kaXNwbGF5ICE9PSAibm9uZSIpIHsKICAgICAgICAgIHZhciBfMHg0NCA9IF8weDNrLnF1ZXJ5U2VsZWN0b3JBbGwoCiAgICAgICAgICAgICIuYWktc2VhcmNoLV8weDJ3LV8weDEyLnNlbGVjdG9yIgogICAgICAgICAgKTsKICAgICAgICAgIGZvciAodmFyIF8weDFqID0gMDsgXzB4MWogPCBfMHg0NC5sZW5ndGg7IF8weDFqKyspIHsKICAgICAgICAgICAgaWYgKF8weDQ0W18weDFqXS5vZmZzZXRQYXJlbnQgIT09IG51bGwpIHsKICAgICAgICAgICAgICBfMHg0My5wdXNoKF8weDQ0W18weDFqXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vINCt0LvQtdC80LXQvdGC0Ysg0L/QvtGB0YLQvtGP0L3QvdC+0Lkg0LjRgdGC0L7RgNC40LgKICAgICAgICBpZiAoXzB4M3MpIHsKICAgICAgICAgIHZhciBfMHgzeSA9IF8weDNzLnF1ZXJ5U2VsZWN0b3JBbGwoCiAgICAgICAgICAgICIuYWktc2VhcmNoLV8weG8tcGVybWFuZW50LV8weDEyLnNlbGVjdG9yIgogICAgICAgICAgKTsKICAgICAgICAgIGZvciAodmFyIF8weDFqID0gMDsgXzB4MWogPCBfMHgzeS5sZW5ndGg7IF8weDFqKyspIHsKICAgICAgICAgICAgaWYgKF8weDN5W18weDFqXS5vZmZzZXRQYXJlbnQgIT09IG51bGwpIHsKICAgICAgICAgICAgICBfMHg0My5wdXNoKF8weDN5W18weDFqXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDQutC+0LvQu9C10LrRhtC40Y4g0L3QsNCy0LjQs9Cw0YbQuNC4CiAgICAgICAgaWYgKF8weDQzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IGpRdWVyeSDQtNC70Y8g0Y3Qu9C10LzQtdC90YLQvtCyCiAgICAgICAgICB2YXIgJGVsZW1lbnRzID0KICAgICAgICAgICAgdHlwZW9mICQgIT09ICJ1bmRlZmluZWQiCiAgICAgICAgICAgICAgPyAkKF8weDQzKQogICAgICAgICAgICAgIDogXzB4NDM7CgogICAgICAgICAgLy8g0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0LrQvtC70LvQtdC60YbQuNGOINGN0LvQtdC80LXQvdGC0L7QsiDQtNC70Y8gTmF2aWdhdG9yCiAgICAgICAgICBpZiAodHlwZW9mIExhbXBhLkNvbnRyb2xsZXIuY29sbGVjdGlvblNldCA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICBMYW1wYS5Db250cm9sbGVyLmNvbGxlY3Rpb25TZXQoJGVsZW1lbnRzKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRhNC+0LrRg9GBINC90LAg0L/QtdGA0LLRi9C5INGN0LvQtdC80LXQvdGCINC40LvQuCDRgtC10LrRg9GJ0LjQuSDQsNC60YLQuNCy0L3Ri9C5CiAgICAgICAgICB2YXIgXzB4NDkgPSBmYWxzZTsKICAgICAgICAgIHZhciBfMHg0YSA9IGRvY3VtZW50Ll8weDRhOwoKICAgICAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0LXRgdGC0Ywg0LvQuCDRg9C20LUg0LDQutGC0LjQstC90YvQuSDRjdC70LXQvNC10L3RgiDQsiDQvdCw0YjQtdC5INC60L7Qu9C70LXQutGG0LjQuAogICAgICAgICAgaWYgKAogICAgICAgICAgICBfMHg0YSAmJgogICAgICAgICAgICBfMHg0My5pbmRleE9mKF8weDRhKSAhPT0gLTEKICAgICAgICAgICkgewogICAgICAgICAgICBfMHg0OSA9IF8weDRhOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g0JjQvdCw0YfQtSDRhNC+0LrRg9GB0LjRgNGD0LXQvNGB0Y8g0L3QsCDQv9C10YDQstC+0Lwg0Y3Qu9C10LzQtdC90YLQtQogICAgICAgICAgICBfMHg0OSA9IF8weDQzWzBdIHx8IGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0eXBlb2YgTGFtcGEuQ29udHJvbGxlci5jb2xsZWN0aW9uRm9jdXMgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgTGFtcGEuQ29udHJvbGxlci5jb2xsZWN0aW9uRm9jdXMoXzB4NDksICRlbGVtZW50cyk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8g0J3QtSDQv9C+0LrQsNC30YvQstCw0LXQvCDQutC70LDQstC40LDRgtGD0YDRgyDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCDQv9GA0Lgg0L3QsNCy0LjQs9Cw0YbQuNC4CiAgICAgICAgICAvLyDQmtC70LDQstC40LDRgtGD0YDQsCDQsdGD0LTQtdGCINC/0L7QutCw0LfQsNC90LAg0YLQvtC70YzQutC+INC/0YDQuCDRj9Cy0L3QvtC8INC00LXQudGB0YLQstC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPIChjbGljaywgaG92ZXI6ZW50ZXIpCgogICAgICAgICAgLy8g0KLQsNC60LbQtSDQvtCx0L3QvtCy0LvRj9C10LwgTmF2aWdhdG9yINC90LDQv9GA0Y/QvNGD0Y4sINC10YHQu9C4INC00L7RgdGC0YPQv9C10L0KICAgICAgICAgIC8vIE5hdmlnYXRvciDRgNCw0LHQvtGC0LDQtdGCINGBIERPTSDRjdC70LXQvNC10L3RgtCw0LzQuCDQvdCw0L/RgNGP0LzRg9GOCiAgICAgICAgICBpZiAodHlwZW9mIE5hdmlnYXRvciAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIE5hdmlnYXRvci5zZXRDb2xsZWN0aW9uID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBOYXZpZ2F0b3Iuc2V0Q29sbGVjdGlvbihfMHg0Myk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGE0L7QutGD0YEg0LIgTmF2aWdhdG9yCiAgICAgICAgICAgICAgaWYgKF8weDQ5ICYmIHR5cGVvZiBOYXZpZ2F0b3IuZm9jdXNlZCA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgTmF2aWdhdG9yLmZvY3VzZWQoXzB4NDkpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICBfMHg0My5sZW5ndGggPiAwICYmCiAgICAgICAgICAgICAgICB0eXBlb2YgTmF2aWdhdG9yLmZvY3VzID09PSAiZnVuY3Rpb24iCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAvLyDQldGB0LvQuCBmb2N1c2VkINC90LUg0YDQsNCx0L7RgtCw0LXRgiwg0L/RgNC+0LHRg9C10LwgZm9jdXMKICAgICAgICAgICAgICAgIE5hdmlnYXRvci5mb2N1cygpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC6INC/0YDQvtC60YDRg9GC0LrQuCDQuCDQv9C+0LrQsNC30LAg0LrQu9Cw0LLQuNCw0YLRg9GA0YsKICAgICAgICAgICAgICAvLyDQrdGC0L4g0L3Rg9C20L3QviDQtNC70Y8g0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60L7QuSDQv9GA0L7QutGA0YPRgtC60Lgg0YDQtdC30YPQu9GM0YLQsNGC0L7QsiDQv9C+0LjRgdC60LAg0Lgg0L/QvtC60LDQt9CwINC60LvQsNCy0LjQsNGC0YPRgNGLCiAgICAgICAgICAgICAgaWYgKCFOYXZpZ2F0b3IuX2FpU2VhcmNoU2Nyb2xsSGFuZGxlcikgewogICAgICAgICAgICAgICAgTmF2aWdhdG9yLl9haVNlYXJjaFNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50Ll8weDRiKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF8weDRiID0gZXZlbnQuXzB4NGI7CgogICAgICAgICAgICAgICAgICAgIC8vINCd0LUg0L/QvtC60LDQt9GL0LLQsNC10Lwg0LrQu9Cw0LLQuNCw0YLRg9GA0YMg0LDQstGC0L7QvNCw0YLQuNGH0LXRgdC60Lgg0L/RgNC4INC90LDQstC40LPQsNGG0LjQuCDRh9C10YDQtdC3IE5hdmlnYXRvcgogICAgICAgICAgICAgICAgICAgIC8vINCa0LvQsNCy0LjQsNGC0YPRgNCwINCx0YPQtNC10YIg0L/QvtC60LDQt9Cw0L3QsCDRgtC+0LvRjNC60L4g0L/RgNC4INGP0LLQvdC+0Lwg0LTQtdC50YHRgtCy0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gKGNsaWNrLCBob3ZlcjplbnRlcikKICAgICAgICAgICAgICAgICAgICAvLyDQn9GA0L7QutGA0YPRh9C40LLQsNC10Lwg0Log0Y3Qu9C10LzQtdC90YLRgywg0LXRgdC70Lgg0L7QvSDQvdCw0YXQvtC00LjRgtGB0Y8g0LIg0YDQtdC30YPQu9GM0YLQsNGC0LDRhSDQv9C+0LjRgdC60LAKICAgICAgICAgICAgICAgICAgICBpZiAoXzB4M2sgJiYgXzB4M2suY29udGFpbnMoXzB4NGIpKSB7CiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDQn9GA0L7QutGA0YPRh9C40LLQsNC10Lwg0Y3Qu9C10LzQtdC90YIg0LIg0LLQuNC00LjQvNGD0Y4g0L7QsdC70LDRgdGC0YwKICAgICAgICAgICAgICAgICAgICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwgc2Nyb2xsSW50b1ZpZXcg0LTQu9GPINC/0YDQvtC60YDRg9GC0LrQuCDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsAogICAgICAgICAgICAgICAgICAgICAgICB2YXIgXzB4NGMgPQogICAgICAgICAgICAgICAgICAgICAgICAgIF8weDNlIHx8IF8weDNrLmNsb3Nlc3QoIi5haS1zZWFyY2gtXzB4M2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8weDRjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0JLRi9GH0LjRgdC70Y/QtdC8INC/0L7Qt9C40YbQuNGOINGN0LvQtdC80LXQvdGC0LAg0L7RgtC90L7RgdC40YLQtdC70YzQvdC+INC60L7QvdGC0LXQudC90LXRgNCwCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF8weDRkID0gXzB4NGIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF8weDRlID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8weDRjLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDQldGB0LvQuCDRjdC70LXQvNC10L3RgiDQvdC1INCy0LjQtNC10L0sINC/0YDQvtC60YDRg9GH0LjQstCw0LXQvCDQuiDQvdC10LzRgwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8weDRkLnRvcCA8IF8weDRlLnRvcCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXzB4NGQuYm90dG9tID4gXzB4NGUuYm90dG9tCiAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfMHg0Yi5zY3JvbGxJbnRvVmlldyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlaGF2aW9yOiAic21vb3RoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2s6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmU6ICJuZWFyZXN0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayAtINC+0LHRi9GH0L3QsNGPINC/0YDQvtC60YDRg9GC0LrQsAogICAgICAgICAgICAgICAgICAgICAgICAgIF8weDRiLnNjcm9sbEludG9WaWV3KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlaGF2aW9yOiAic21vb3RoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrOiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZTogIm5lYXJlc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4IHNtb290aCDQvdC1INC/0L7QtNC00LXRgNC20LjQstCw0LXRgtGB0Y8sINC40YHQv9C+0LvRjNC30YPQtdC8INC+0LHRi9GH0L3Rg9GOINC/0YDQvtC60YDRg9GC0LrRgwogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF8weDRiLnNjcm9sbEludG9WaWV3KGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZTIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDQmNCz0L3QvtGA0LjRgNGD0LXQvCDQvtGI0LjQsdC60YMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyDQn9GA0L7QutGA0YPRh9C40LLQsNC10Lwg0Log0Y3Qu9C10LzQtdC90YLRgyDQv9C+0YHRgtC+0Y/QvdC90L7QuSDQuNGB0YLQvtGA0LjQuCwg0LXRgdC70Lgg0L7QvSDQvdCw0YXQvtC00LjRgtGB0Y8g0LIg0LjRgdGC0L7RgNC40LgKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgICAgIF8weDNzICYmCiAgICAgICAgICAgICAgICAgICAgICBfMHgzcy5jb250YWlucyhfMHg0YikKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vINCf0YDQvtC60YDRg9GH0LjQstCw0LXQvCDRjdC70LXQvNC10L3RgiDQuNGB0YLQvtGA0LjQuCDQsiDQstC40LTQuNC80YPRjiDQvtCx0LvQsNGB0YLRjAogICAgICAgICAgICAgICAgICAgICAgICB2YXIgXzB4NGMgPQogICAgICAgICAgICAgICAgICAgICAgICAgIF8weDNlIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgXzB4M3MuY2xvc2VzdCgiLmFpLXNlYXJjaC1fMHgzZSIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoXzB4NGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgXzB4NGQgPSBfMHg0Yi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgXzB4NGUgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXzB4NGMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIC8vINCV0YHQu9C4INGN0LvQtdC80LXQvdGCINC90LUg0LLQuNC00LXQvSDQsiDQutC+0L3RgtC10LnQvdC10YDQtSDQuNGB0YLQvtGA0LjQuCwg0L/RgNC+0LrRgNGD0YfQuNCy0LDQtdC8INC6INC90LXQvNGDCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXzB4NGQudG9wIDwgXzB4NGUudG9wIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfMHg0ZC5ib3R0b20gPiBfMHg0ZS5ib3R0b20KICAgICAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8weDRiLnNjcm9sbEludG9WaWV3KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6ICJzbW9vdGgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jazogIm5lYXJlc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmU6ICJuZWFyZXN0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayAtINC+0LHRi9GH0L3QsNGPINC/0YDQvtC60YDRg9GC0LrQsAogICAgICAgICAgICAgICAgICAgICAgICAgIF8weDRiLnNjcm9sbEludG9WaWV3KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlaGF2aW9yOiAic21vb3RoIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrOiAibmVhcmVzdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmU6ICJuZWFyZXN0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDQldGB0LvQuCBzbW9vdGgg0L3QtSDQv9C+0LTQtNC10YDQttC40LLQsNC10YLRgdGPLCDQuNGB0L/QvtC70YzQt9GD0LXQvCDQvtCx0YvRh9C90YPRjiDQv9GA0L7QutGA0YPRgtC60YMKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfMHg0Yi5zY3JvbGxJbnRvVmlldyhmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0JjQs9C90L7RgNC40YDRg9C10Lwg0L7RiNC40LHQutGDCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAvLyDQn9C+0LTQv9C40YHRi9Cy0LDQtdC80YHRjyDQvdCwINGB0L7QsdGL0YLQuNC1IGZvY3VzINC+0YIgTmF2aWdhdG9yCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIE5hdmlnYXRvci5mb2xsb3cgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAgICAgTmF2aWdhdG9yLmZvbGxvdygiZm9jdXMiLCBOYXZpZ2F0b3IuX2FpU2VhcmNoU2Nyb2xsSGFuZGxlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgLy8g0JjQs9C90L7RgNC40YDRg9C10Lwg0L7RiNC40LHQutC4IE5hdmlnYXRvcgogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vINCV0YHQu9C4INC90LXRgiDRjdC70LXQvNC10L3RgtC+0LIsINC+0YfQuNGJ0LDQtdC8INC60L7Qu9C70LXQutGG0LjRjgogICAgICAgICAgaWYgKHR5cGVvZiBMYW1wYS5Db250cm9sbGVyLmNvbGxlY3Rpb25TZXQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgTGFtcGEuQ29udHJvbGxlci5jb2xsZWN0aW9uU2V0KCQoW10pKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBfMHhhLndhcm4oItCe0YjQuNCx0LrQsCDQv9GA0Lgg0L7QsdC90L7QstC70LXQvdC40Lgg0L3QsNCy0LjQs9Cw0YbQuNC4OiIsIGUpOwogICAgICB9CiAgICB9CgogICAgLy8g0KTRg9C90LrRhtC40Y8g0LTQu9GPINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INC90LDQstC40LPQsNGG0LjQuAogICAgZnVuY3Rpb24gaW5pdE5hdmlnYXRpb24oKSB7CiAgICAgIGlmICghTGFtcGEgfHwgIUxhbXBhLkNvbnRyb2xsZXIpIHsKICAgICAgICBfMHhhLndhcm4oIkxhbXBhLkNvbnRyb2xsZXIg0L3QtdC00L7RgdGC0YPQv9C10L0iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC/0YDQtdC00YvQtNGD0YnQuNC5INC60L7QvdGC0YDQvtC70LvQtdGAINC4INC+0YLQutC70Y7Rh9Cw0LXQvCDQtdCz0L4KICAgICAgICB0cnkgewogICAgICAgICAgdmFyIF8weDRpID0gTGFtcGEuQ29udHJvbGxlci5fMHg0aSgpOwogICAgICAgICAgaWYgKF8weDRpICYmIF8weDRpLm5hbWUpIHsKICAgICAgICAgICAgXzB4M3UgPSBfMHg0aS5uYW1lOwogICAgICAgICAgICAvLyDQntGC0LrQu9GO0YfQsNC10Lwg0L/RgNC10LTRi9C00YPRidC40Lkg0LrQvtC90YLRgNC+0LvQu9C10YAsINGH0YLQvtCx0Ysg0YPQv9GA0LDQstC70LXQvdC40LUg0L3QtSDQv9GA0L7RhdC+0LTQuNC70L4g0YfQtdGA0LXQtyDQvdC10LPQvgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIExhbXBhLkNvbnRyb2xsZXIuZGlzYWJsZShfMHgzdSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAvLyDQmNCz0L3QvtGA0LjRgNGD0LXQvCDQvtGI0LjQsdC60YMsINC10YHQu9C4IGRpc2FibGUg0L3QtSDQv9C+0LTQtNC10YDQttC40LLQsNC10YLRgdGPCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAvLyDQmNCz0L3QvtGA0LjRgNGD0LXQvCDQvtGI0LjQsdC60YMKICAgICAgICB9CgogICAgICAgIC8vINCf0LXRgNC10YXQstCw0YLRi9Cy0LDQtdC8INC90LDQstC40LPQsNGG0LjQvtC90L3Ri9C1INGB0L7QsdGL0YLQuNGPINC00L4g0L7QsdGA0LDQsdC+0YLQutC4INC+0YHQvdC+0LLQvdGL0Lwg0L/RgNC40LvQvtC20LXQvdC40LXQvAogICAgICAgIC8vINCt0YLQviDQutGA0LjRgtC40YfQvdC+INC00LvRjyDQsdC70L7QutC40YDQvtCy0LrQuCDRg9C/0YDQsNCy0LvQtdC90LjRjyDQvtGB0L3QvtCy0L3Ri9C8INC/0YDQuNC70L7QttC10L3QuNC10LwKICAgICAgICB2YXIgXzB4NGogPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRh9GC0L4g0LzQvtC00LDQu9GM0L3QvtC1INC+0LrQvdC+INC+0YLQutGA0YvRgtC+INC4INCw0LrRgtC40LLQvdC+CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICFfMHgzZCB8fAogICAgICAgICAgICAhZG9jdW1lbnQuYm9keS5jb250YWlucyhfMHgzZCkgfHwKICAgICAgICAgICAgXzB4M2QuXzB4M2MuZGlzcGxheSA9PT0gIm5vbmUiCiAgICAgICAgICApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBfMHg0ayA9IGUua2V5Q29kZSB8fCBlLndoaWNoOwoKICAgICAgICAgIC8vINCh0L/QuNGB0L7QuiDQvdCw0LLQuNCz0LDRhtC40L7QvdC90YvRhSDQutC70LDQstC40YggKNCy0YHQtSwg0LrRgNC+0LzQtSDRgtC10LrRgdGC0L7QstGL0YUpCiAgICAgICAgICB2YXIgXzB4NGwgPSBbMzcsIDM4LCAzOSwgNDAsIDEzLCAyNywgOCwgMzMsIDM0LCAzNSwgMzZdOyAvLyDRgdGC0YDQtdC70LrQuCwgRW50ZXIsIEVzY2FwZSwgQmFjaywgUGFnZSBVcC9Eb3duLCBIb21lL0VuZAogICAgICAgICAgdmFyIF8weDRtID0gXzB4NGwuaW5kZXhPZihfMHg0aykgIT09IC0xOwoKICAgICAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0L3QsNGF0L7QtNC40YLRgdGPINC70Lgg0YTQvtC60YPRgSDQvdCwINC/0L7Qu9C1INCy0LLQvtC00LAKICAgICAgICAgIHZhciBfMHg0YSA9IGRvY3VtZW50Ll8weDRhOwogICAgICAgICAgdmFyIF8weDRvID0KICAgICAgICAgICAgXzB4NGEgJiYKICAgICAgICAgICAgXzB4NGEudGFnTmFtZSA9PT0gIklOUFVUIiAmJgogICAgICAgICAgICBfMHg0YSA9PT0gXzB4M2k7CgogICAgICAgICAgLy8g0JTQu9GPIEVzY2FwZSDQstGB0LXQs9C00LAg0L7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8ICjQtNCw0LbQtSDQtdGB0LvQuCDRhNC+0LrRg9GBINC90LAgXzB4M2kpCiAgICAgICAgICBpZiAoXzB4NGsgPT09IDI3KSB7CiAgICAgICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgY2xvc2VNb2RhbCgpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgLy8g0JTQu9GPIEJhY2tzcGFjZSDQv9GA0Lgg0YTQvtC60YPRgdC1INC90LAgXzB4M2kgLSDQsdC70L7QutC40YDRg9C10Lwg0YDQsNGB0L/RgNC+0YHRgtGA0LDQvdC10L3QuNC1INC6IENvbnRyb2xsZXIsCiAgICAgICAgICAvLyDQvdC+INCd0JUg0LLRi9C30YvQstCw0LXQvCBwcmV2ZW50RGVmYXVsdCgpLCDRh9GC0L7QsdGLINCx0YDQsNGD0LfQtdGAINC80L7QsyDRg9C00LDQu9C40YLRjCDRgtC10LrRgdGCCiAgICAgICAgICBpZiAoXzB4NGsgPT09IDggJiYgXzB4NG8pIHsKICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgLy8g0J3QlSDQstGL0LfRi9Cy0LDQtdC8IHByZXZlbnREZWZhdWx0KCkgLSDQv9C+0LfQstC+0LvRj9C10Lwg0LHRgNCw0YPQt9C10YDRgyDRg9C00LDQu9C40YLRjCDRgtC10LrRgdGCCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyDQlNC70Y8g0LTRgNGD0LPQuNGFINC90LDQstC40LPQsNGG0LjQvtC90L3Ri9GFINC60LvQsNCy0LjRiCDQndCVINCx0LvQvtC60LjRgNGD0LXQvCDRgdC+0LHRi9GC0LjRjwogICAgICAgICAgLy8g0J/QvtC30LLQvtC70Y/QtdC8IENvbnRyb2xsZXIg0LggTmF2aWdhdG9yINC+0LHRgNCw0LHQvtGC0LDRgtGMINC40YUKICAgICAgICAgIC8vIENvbnRyb2xsZXIudG9nZ2xlKCkg0LTQvtC70LbQtdC9INC/0LXRgNC10YXQstCw0YLQuNGC0Ywg0YPQv9GA0LDQstC70LXQvdC40LUKICAgICAgICAgIC8vINCR0LvQvtC60LjRgNGD0LXQvCDRgtC+0LvRjNC60L4g0LXRgdC70Lgg0YTQvtC60YPRgSDQvdCwIF8weDNpINC4INGN0YLQviDQvdC1IEVudGVyINC4INC90LUgQmFja3NwYWNlCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIF8weDRtICYmCiAgICAgICAgICAgIF8weDRvICYmCiAgICAgICAgICAgIF8weDRrICE9PSAxMyAmJgogICAgICAgICAgICBfMHg0ayAhPT0gOAogICAgICAgICAgKSB7CiAgICAgICAgICAgIC8vINCR0LvQvtC60LjRgNGD0LXQvCDQvdCw0LLQuNCz0LDRhtC40L7QvdC90YvQtSDRgdC+0LHRi9GC0LjRjyDRgtC+0LvRjNC60L4g0L/RgNC4INCy0LLQvtC00LUg0YLQtdC60YHRgtCwICjQutGA0L7QvNC1IEVudGVyINC4IEJhY2tzcGFjZSkKICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICAvLyDQldGB0LvQuCDRhNC+0LrRg9GBINC90LUg0L3QsCBfMHgzaSwg0L/QvtC30LLQvtC70Y/QtdC8INGB0L7QsdGL0YLQuNGP0Lwg0L7QsdGA0LDQsdCw0YLRi9Cy0LDRgtGM0YHRjyBDb250cm9sbGVyL05hdmlnYXRvcgogICAgICAgIH07CgogICAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgSDQstGL0YHQvtC60LjQvCDQv9GA0LjQvtGA0LjRgtC10YLQvtC8IChjYXB0dXJlIHBoYXNlKSDQvdCwIHdpbmRvdwogICAgICAgIC8vINCt0YLQviDQs9Cw0YDQsNC90YLQuNGA0YPQtdGCLCDRh9GC0L4g0YHQvtCx0YvRgtC40Y8g0LHRg9C00YPRgiDQv9C10YDQtdGF0LLQsNGH0LXQvdGLINCU0J4g0L7QsdGA0LDQsdC+0YLQutC4INC+0YHQvdC+0LLQvdGL0Lwg0L/RgNC40LvQvtC20LXQvdC40LXQvAogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgXzB4NGosIHRydWUpOwoKICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINGD0LTQsNC70LXQvdC40Y8KICAgICAgICBfMHgzZC5fYWlTZWFyY2hLZXlIYW5kbGVyID0gXzB4NGo7CgogICAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC60L7QvdGC0YDQvtC70LvQtdGAINC00LvRjyDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsAogICAgICAgIExhbXBhLkNvbnRyb2xsZXIuYWRkKCJhaV9zZWFyY2hfbW9kYWwiLCB7CiAgICAgICAgICBpbnZpc2libGU6IGZhbHNlLCAvLyDQmtC+0L3RgtGA0L7Qu9C70LXRgCDQstC40LTQuNC80YvQuSwg0LHQu9C+0LrQuNGA0YPQtdGCINC+0YHQvdC+0LLQvdC+0LkKICAgICAgICAgIHRvZ2dsZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyDQn9GA0Lgg0L/QtdGA0LXQutC70Y7Rh9C10L3QuNC4INC90LAg0Y3RgtC+0YIg0LrQvtC90YLRgNC+0LvQu9C10YAg0L7QsdC90L7QstC70Y/QtdC8INC90LDQstC40LPQsNGG0LjRjgogICAgICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uKCk7CiAgICAgICAgICB9LAogICAgICAgICAgdXA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10LwgTmF2aWdhdG9yINC10YHQu9C4INC00L7RgdGC0YPQv9C10L0KICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIHR5cGVvZiBOYXZpZ2F0b3IgIT09ICJ1bmRlZmluZWQiICYmCiAgICAgICAgICAgICAgTmF2aWdhdG9yLmNhbm1vdmUgJiYKICAgICAgICAgICAgICBOYXZpZ2F0b3IuY2FubW92ZSgidXAiKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBOYXZpZ2F0b3IubW92ZSgidXAiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGRvd246IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10LwgTmF2aWdhdG9yINC10YHQu9C4INC00L7RgdGC0YPQv9C10L0KICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIHR5cGVvZiBOYXZpZ2F0b3IgIT09ICJ1bmRlZmluZWQiICYmCiAgICAgICAgICAgICAgTmF2aWdhdG9yLmNhbm1vdmUgJiYKICAgICAgICAgICAgICBOYXZpZ2F0b3IuY2FubW92ZSgiZG93biIpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIE5hdmlnYXRvci5tb3ZlKCJkb3duIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBsZWZ0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IE5hdmlnYXRvciDQtdGB0LvQuCDQtNC+0YHRgtGD0L/QtdC9CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICB0eXBlb2YgTmF2aWdhdG9yICE9PSAidW5kZWZpbmVkIiAmJgogICAgICAgICAgICAgIE5hdmlnYXRvci5jYW5tb3ZlICYmCiAgICAgICAgICAgICAgTmF2aWdhdG9yLmNhbm1vdmUoImxlZnQiKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBOYXZpZ2F0b3IubW92ZSgibGVmdCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgcmlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10LwgTmF2aWdhdG9yINC10YHQu9C4INC00L7RgdGC0YPQv9C10L0KICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIHR5cGVvZiBOYXZpZ2F0b3IgIT09ICJ1bmRlZmluZWQiICYmCiAgICAgICAgICAgICAgTmF2aWdhdG9yLmNhbm1vdmUgJiYKICAgICAgICAgICAgICBOYXZpZ2F0b3IuY2FubW92ZSgicmlnaHQiKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBOYXZpZ2F0b3IubW92ZSgicmlnaHQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGJhY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY2xvc2VNb2RhbCgpOwogICAgICAgICAgfSwKICAgICAgICB9KTsKCiAgICAgICAgXzB4M3QgPSAiYWlfc2VhcmNoX21vZGFsIjsKCiAgICAgICAgLy8g0JDQutGC0LjQstC40YDRg9C10Lwg0LrQvtC90YLRgNC+0LvQu9C10YAgKNC/0LXRgNC10LrQu9GO0YfQsNC10Lwg0YPQv9GA0LDQstC70LXQvdC40LUg0L3QsCDQvNC+0LTQsNC70YzQvdC+0LUg0L7QutC90L4pCiAgICAgICAgLy8g0K3RgtC+INC00L7Qu9C20L3QviDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCDQvtGC0LrQu9GO0YfQuNGC0Ywg0L7RgdC90L7QstC90L7QuSDQutC+0L3RgtGA0L7Qu9C70LXRgAogICAgICAgIExhbXBhLkNvbnRyb2xsZXIudG9nZ2xlKCJhaV9zZWFyY2hfbW9kYWwiKTsKCiAgICAgICAgLy8g0JjQvdC40YbQuNCw0LvQuNC30LjRgNGD0LXQvCDQvdCw0LLQuNCz0LDRhtC40Y4g0YEg0L3QtdCx0L7Qu9GM0YjQvtC5INC30LDQtNC10YDQttC60L7QuSDQtNC70Y8g0LPQsNGA0LDQvdGC0LjQuCDQs9C+0YLQvtCy0L3QvtGB0YLQuCBET00KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb24oKTsKICAgICAgICB9LCAyMDApOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgXzB4YS5lcnJvcigi0J7RiNC40LHQutCwINC/0YDQuCDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCDQvdCw0LLQuNCz0LDRhtC40Lg6IiwgZSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0LLRi9C/0L7Qu9C90LXQvdC40Y8g0L/QvtC40YHQutCwCiAgICBmdW5jdGlvbiBwZXJmb3JtU2VhcmNoKCkgewogICAgICB2YXIgXzB4NHAgPSBfMHgzaSA/IF8weDNpLnZhbHVlLnRyaW0oKSA6ICIiOwogICAgICBpZiAoIV8weDRwKSB7CiAgICAgICAgTGFtcGEuTm90eS5zaG93KCLQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0L7Qv9C40YHQsNC90LjQtSDRhNC40LvRjNC80LAiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBfMHgyYyA9IGdldE9wZW5Sb3V0ZXJBcGlLZXkoKTsKICAgICAgaWYgKCFfMHgyYyB8fCAhXzB4MmMudHJpbSgpKSB7CiAgICAgICAgTGFtcGEuTm90eS5zaG93KAogICAgICAgICAgIkFQSSDQutC70Y7RhyDQvdC1INC90LDRgdGC0YDQvtC10L0uINCf0L7QttCw0LvRg9C50YHRgtCwLCDRg9C60LDQttC40YLQtSBBUEkg0LrQu9GO0Ycg0LIg0L3QsNGB0YLRgNC+0LnQutCw0YUg0L/Qu9Cw0LPQuNC90LAuIgogICAgICAgICk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgXzB4MmQgPSBnZXRBaU1vZGVsKCk7CiAgICAgIGlmICghXzB4MmQgfHwgIV8weDJkLnRyaW0oKSkgewogICAgICAgIExhbXBhLk5vdHkuc2hvdygKICAgICAgICAgICLQnNC+0LTQtdC70Ywg0JjQmCDQvdC1INC90LDRgdGC0YDQvtC10L3QsC4g0J/QvtC20LDQu9GD0LnRgdGC0LAsINGD0LrQsNC20LjRgtC1INC80L7QtNC10LvRjCDQsiDQvdCw0YHRgtGA0L7QudC60LDRhSDQv9C70LDQs9C40L3QsC4iCiAgICAgICAgKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vINCh0LrRgNGL0LLQsNC10Lwg0Y3Qu9C10LzQtdC90YLRiywg0L/QvtC60LDQt9GL0LLQsNC10Lwg0LfQsNCz0YDRg9C30LrRgwogICAgICBfMHgzbC5fMHgzYy5kaXNwbGF5ID0gIm5vbmUiOwogICAgICBfMHgzbS5fMHgzYy5kaXNwbGF5ID0gIm5vbmUiOwogICAgICBfMHgzay5fMHgzYy5kaXNwbGF5ID0gIm5vbmUiOwogICAgICBfMHgzai5fMHgzYy5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgXzB4M2guZGlzYWJsZWQgPSB0cnVlOwoKICAgICAgLy8g0JLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGB0YLRgNGD0LrRgtGD0YDRgyBfMHgzaiwg0LXRgdC70Lgg0L7QvdCwINCx0YvQu9CwINGD0LTQsNC70LXQvdCwICjQv9C+0YHQu9C1INC+0YjQuNCx0LrQuCkKICAgICAgdmFyIF8weDRzID0gXzB4M2oucXVlcnlTZWxlY3RvcigKICAgICAgICAiLmFpLXNlYXJjaC1sb2FkaW5nLXRleHQiCiAgICAgICk7CiAgICAgIHZhciBfMHg0dCA9IF8weDNqLnF1ZXJ5U2VsZWN0b3IoIi5haS1zZWFyY2gtZG90cyIpOwogICAgICB2YXIgXzB4NHUgPSBfMHgzai5xdWVyeVNlbGVjdG9yKAogICAgICAgICIuYWktc2VhcmNoLXByb2dyZXNzLWJhciIKICAgICAgKTsKICAgICAgdmFyIF8weDR2ID0gXzB4M2oucXVlcnlTZWxlY3RvcigKICAgICAgICAiLmFpLXNlYXJjaC1wcm9ncmVzcy1maWxsIgogICAgICApOwogICAgICB2YXIgXzB4NHcgPSBfMHgzai5xdWVyeVNlbGVjdG9yKAogICAgICAgICIuYWktc2VhcmNoLXByb2dyZXNzLWluZm8iCiAgICAgICk7CgogICAgICBpZiAoIV8weDRzIHx8ICFfMHg0dCkgewogICAgICAgIC8vINCS0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDRgdGC0YDRg9C60YLRg9GA0YMKICAgICAgICBfMHgzai5pbm5lckhUTUwgPQogICAgICAgICAg')"<div class="_d('YWktc2VhcmNoLWxvYWRpbmctdGV4dA==')">ИИ анализирует ваш запрос...</div>"_d('ICsKICAgICAgICAgIA==')"<div class="_d('YWktc2VhcmNoLWRvdHM=')">"_d('ICsKICAgICAgICAgIA==')"<div class="_d('YWktc2VhcmNoLWRvdA==')"></div>"_d('ICsKICAgICAgICAgIA==')"<div class="_d('YWktc2VhcmNoLWRvdA==')"></div>"_d('ICsKICAgICAgICAgIA==')"<div class="_d('YWktc2VhcmNoLWRvdA==')"></div>"_d('ICsKICAgICAgICAgICI8L2Rpdj4iICsKICAgICAgICAgIA==')"<div class="_d('YWktc2VhcmNoLXByb2dyZXNzLWJhcg==')"_d('IF8weDNjPQ==')"_d('ZGlzcGxheTogbm9uZTs=')">"_d('ICsKICAgICAgICAgIA==')"<div class="_d('YWktc2VhcmNoLXByb2dyZXNzLWZpbGw=')"_d('IF8weDNjPQ==')"_d('d2lkdGg6IDAlOw==')"></div>"_d('ICsKICAgICAgICAgICI8L2Rpdj4iICsKICAgICAgICAgIA==')"<div class="_d('YWktc2VhcmNoLXByb2dyZXNzLWluZm8=')"></div>"_d('OwogICAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDRgdGB0YvQu9C60Lgg0L3QsCDRjdC70LXQvNC10L3RgtGLICjQsdC10LcgdmFyLCDRgtCw0Log0LrQsNC6INC/0LXRgNC10LzQtdC90L3Ri9C1INGD0LbQtSDQvtCx0YrRj9Cy0LvQtdC90YspCiAgICAgICAgdmFyIF8weDR4ID0gXzB4M2oucXVlcnlTZWxlY3RvcigKICAgICAgICAgICIuYWktc2VhcmNoLWxvYWRpbmctdGV4dCIKICAgICAgICApOwogICAgICAgIHZhciBfMHg0eSA9IF8weDNqLnF1ZXJ5U2VsZWN0b3IoIi5haS1zZWFyY2gtZG90cyIpOwogICAgICAgIHZhciBfMHg0eiA9IF8weDNqLnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgICAiLmFpLXNlYXJjaC1wcm9ncmVzcy1iYXIiCiAgICAgICAgKTsKICAgICAgICB2YXIgXzB4NTAgPSBfMHgzai5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgIi5haS1zZWFyY2gtcHJvZ3Jlc3MtZmlsbCIKICAgICAgICApOwogICAgICAgIHZhciBfMHg1MSA9IF8weDNqLnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgICAiLmFpLXNlYXJjaC1wcm9ncmVzcy1pbmZvIgogICAgICAgICk7CgogICAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDRgdGB0YvQu9C60Lgg0LIg0L7QsdC70LDRgdGC0Lgg0LLQuNC00LjQvNC+0YHRgtC4INGE0YPQvdC60YbQuNC4CiAgICAgICAgaWYgKF8weDR4KSBfMHgzcSA9IF8weDR4OwogICAgICAgIGlmIChfMHg0eSkgXzB4M3IgPSBfMHg0eTsKICAgICAgICBpZiAoXzB4NHopIF8weDNuID0gXzB4NHo7CiAgICAgICAgaWYgKF8weDUwKSBfMHgzbyA9IF8weDUwOwogICAgICAgIGlmIChfMHg1MSkgXzB4M3AgPSBfMHg1MTsKICAgICAgfQoKICAgICAgLy8g0KHQsdGA0LDRgdGL0LLQsNC10Lwg0YHQvtGB0YLQvtGP0L3QuNC1INC30LDQs9GA0YPQt9C60Lgg0LTQu9GPINC90L7QstC+0LPQviDQv9C+0LjRgdC60LAKICAgICAgaWYgKF8weDNxKSB7CiAgICAgICAgXzB4M3EudGV4dENvbnRlbnQgPSAi0JjQmCDQsNC90LDQu9C40LfQuNGA0YPQtdGCINCy0LDRiCDQt9Cw0L/RgNC+0YEuLi4iOwogICAgICB9CiAgICAgIGlmIChfMHgzcikgewogICAgICAgIF8weDNyLl8weDNjLmRpc3BsYXkgPSAiZmxleCI7CiAgICAgIH0KICAgICAgaWYgKF8weDNuKSB7CiAgICAgICAgXzB4M24uXzB4M2MuZGlzcGxheSA9ICJub25lIjsKICAgICAgfQogICAgICBpZiAoXzB4M28pIHsKICAgICAgICBfMHgzby5fMHgzYy53aWR0aCA9ICIwJSI7CiAgICAgIH0KICAgICAgaWYgKF8weDNwKSB7CiAgICAgICAgXzB4M3AudGV4dENvbnRlbnQgPSAiIjsKICAgICAgfQoKICAgICAgLy8g0JfQsNC/0YDQvtGBINC6INCY0JgKICAgICAgdmFyIF8weDUyID0gXzB4M2oucXVlcnlTZWxlY3RvcigiLmFpLXNlYXJjaC1sb2FkaW5nLXRleHQiKTsKICAgICAgdmFyIF8weDUzID0gMDsKCiAgICAgIHF1ZXJ5QUkoXzB4NHAsIGZ1bmN0aW9uIChlcnJvciwgYWlSZXNwb25zZSkgewogICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgXzB4NTMrKzsKICAgICAgICAgIHZhciBfMHg1NCA9IGVycm9yLm1lc3NhZ2U7CgogICAgICAgICAgLy8g0KHQv9C10YbQuNCw0LvRjNC90YvQtSDRgdC+0L7QsdGJ0LXQvdC40Y8g0LTQu9GPINGA0LDQt9C90YvRhSDRgtC40L/QvtCyINC+0YjQuNCx0L7QugogICAgICAgICAgaWYgKAogICAgICAgICAgICBfMHg1NC5pbmNsdWRlcygiNDI5IikgfHwKICAgICAgICAgICAgXzB4NTQuaW5jbHVkZXMoItC70LjQvNC40YIg0LfQsNC/0YDQvtGB0L7QsiIpCiAgICAgICAgICApIHsKICAgICAgICAgICAgXzB4NTQgPQogICAgICAgICAgICAgICLQn9GA0LXQstGL0YjQtdC9INC70LjQvNC40YIg0LfQsNC/0YDQvtGB0L7QsiDQuiBBUEkuXG5cbiIgKwogICAgICAgICAgICAgICLQktC+0LfQvNC+0LbQvdGL0LUg0YDQtdGI0LXQvdC40Y86XG4iICsKICAgICAgICAgICAgICAiMS4g0J/QvtC00L7QttC00LjRgtC1IDEtMiDQvNC40L3Rg9GC0Ysg0Lgg0L/QvtC/0YDQvtCx0YPQudGC0LUg0YHQvdC+0LLQsFxuIiArCiAgICAgICAgICAgICAgIjIuINCY0YHQv9C+0LvRjNC30YPQudGC0LUg0LHQvtC70LXQtSDQvNC10LTQu9C10L3QvdGD0Y4g0LzQvtC00LXQu9GMICjQvdC10LrQvtGC0L7RgNGL0LUg0LHQtdGB0L/Qu9Cw0YLQvdGL0LUg0LzQvtC00LXQu9C4INC40LzQtdGO0YIg0YHRgtGA0L7Qs9C40LUg0LvQuNC80LjRgtGLKVxuIiArCiAgICAgICAgICAgICAgIjMuINCf0YDQvtCy0LXRgNGM0YLQtSwg0L3QtSDQv9GA0LXQstGL0YjQtdC9INC70Lgg0LvQuNC80LjRgiDQvdCwINCy0LDRiNC10Lwg0LDQutC60LDRg9C90YLQtSBPcGVuUm91dGVyIjsKICAgICAgICAgIH0gZWxzZSBpZiAoXzB4NTQuaW5jbHVkZXMoItC/0L7Qv9GL0YLQvtC6IikpIHsKICAgICAgICAgICAgXzB4NTQgPQogICAgICAgICAgICAgICLQndC1INGD0LTQsNC70L7RgdGMINC/0L7Qu9GD0YfQuNGC0Ywg0L7RgtCy0LXRgiDQvtGCINCY0Jgg0L/QvtGB0LvQtSDQvdC10YHQutC+0LvRjNC60LjRhSDQv9C+0L/Ri9GC0L7Qui4g0J/QvtC/0YDQvtCx0YPQudGC0LU6XG4iICsKICAgICAgICAgICAgICAiMS4g0J/RgNC+0LLQtdGA0LjRgtGMINC/0L7QtNC60LvRjtGH0LXQvdC40LUg0Log0LjQvdGC0LXRgNC90LXRgtGDXG4iICsKICAgICAgICAgICAgICAiMi4g0JjQt9C80LXQvdC40YLRjCDRhNC+0YDQvNGD0LvQuNGA0L7QstC60YMg0LfQsNC/0YDQvtGB0LBcbiIgKwogICAgICAgICAgICAgICIzLiDQn9C+0L/RgNC+0LHQvtCy0LDRgtGMINC/0L7Qt9C20LUiOwogICAgICAgICAgfSBlbHNlIGlmIChfMHg1NC5pbmNsdWRlcygiQVBJINC60LvRjtGHIikpIHsKICAgICAgICAgICAgXzB4NTQgPSAi0J7RiNC40LHQutCwOiAiICsgXzB4NTQ7CiAgICAgICAgICB9IGVsc2UgaWYgKF8weDU0LmluY2x1ZGVzKCLQntGI0LjQsdC60LAgQVBJIikpIHsKICAgICAgICAgICAgXzB4NTQgPQogICAgICAgICAgICAgICLQntGI0LjQsdC60LAg0YHQtdGA0LLQtdGA0LA6ICIgKwogICAgICAgICAgICAgIF8weDU0ICsKICAgICAgICAgICAgICAiXG7Qn9C+0L/RgNC+0LHRg9C50YLQtSDQv9C+0LfQttC1INC40LvQuCDQuNC30LzQtdC90LjRgtC1INC30LDQv9GA0L7RgS4iOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgXzB4NTQgPQogICAgICAgICAgICAgICLQntGI0LjQsdC60LA6ICIgKwogICAgICAgICAgICAgIF8weDU0ICsKICAgICAgICAgICAgICAiXG7Qn9C+0L/RgNC+0LHRg9C50YLQtSDQuNC30LzQtdC90LjRgtGMINGE0L7RgNC80YPQu9C40YDQvtCy0LrRgyDQt9Cw0L/RgNC+0YHQsC4iOwogICAgICAgICAgfQoKICAgICAgICAgIF8weDNqLmlubmVySFRNTCA9CiAgICAgICAgICAgIA==')"<div class="_d('YWktc2VhcmNoLWVycm9y')">"_d('ICsKICAgICAgICAgICAgXzB4NTQucmVwbGFjZSgvXG4vZywgIjxicj4iKSArCiAgICAgICAgICAgICI8L2Rpdj4iOwogICAgICAgICAgXzB4M20uXzB4M2MuZGlzcGxheSA9ICJmbGV4IjsKICAgICAgICAgIF8weDNsLl8weDNjLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgXzB4M2guZGlzYWJsZWQgPSBmYWxzZTsKCiAgICAgICAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0L3QsNCy0LjQs9Cw0YbQuNGOINC/0L7RgdC70LUg0L7RiNC40LHQutC4CiAgICAgICAgICBpZiAoXzB4M3QpIHsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdXBkYXRlTmF2aWdhdGlvbigpOwogICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFhaVJlc3BvbnNlLl8weDI0IHx8ICFhaVJlc3BvbnNlLl8weDI0Lmxlbmd0aCkgewogICAgICAgICAgXzB4M2ouaW5uZXJIVE1MID0KICAgICAgICAgICAg')"<div class="_d('YWktc2VhcmNoLWVycm9y')">ИИ не смог найти подходящие фильмы. Попробуйте другой запрос.</div>"_d('OwogICAgICAgICAgXzB4M20uXzB4M2MuZGlzcGxheSA9ICJmbGV4IjsKICAgICAgICAgIF8weDNsLl8weDNjLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgXzB4M2guZGlzYWJsZWQgPSBmYWxzZTsKCiAgICAgICAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0L3QsNCy0LjQs9Cw0YbQuNGOINC/0L7RgdC70LUg0L7RiNC40LHQutC4CiAgICAgICAgICBpZiAoXzB4M3QpIHsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdXBkYXRlTmF2aWdhdGlvbigpOwogICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INGB0YLQsNGC0YPRgSDQt9Cw0LPRgNGD0LfQutC4CiAgICAgICAgaWYgKF8weDNxKSB7CiAgICAgICAgICBfMHgzcS50ZXh0Q29udGVudCA9CiAgICAgICAgICAgICLQn9C+0LvRg9GH0LXQvdC+ICIgKwogICAgICAgICAgICBhaVJlc3BvbnNlLl8weDI0Lmxlbmd0aCArCiAgICAgICAgICAgICIg0YDQtdC60L7QvNC10L3QtNCw0YbQuNC5INC+0YIg0JjQmC4g0JjRidGDINCyINCx0LDQt9C1INC00LDQvdC90YvRhS4uLiI7CiAgICAgICAgfQogICAgICAgIGlmIChfMHgzcikgewogICAgICAgICAgXzB4M3IuXzB4M2MuZGlzcGxheSA9ICJub25lIjsKICAgICAgICB9CiAgICAgICAgaWYgKF8weDNuKSB7CiAgICAgICAgICBfMHgzbi5fMHgzYy5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICB9CiAgICAgICAgaWYgKF8weDNwKSB7CiAgICAgICAgICBfMHgzcC50ZXh0Q29udGVudCA9ICLQndCw0YfQuNC90LDRjiDQv9C+0LjRgdC6Li4uIjsKICAgICAgICB9CgogICAgICAgIC8vINCf0L7QuNGB0Log0LIgVE1EQiDRgSBjYWxsYmFjayDQv9GA0L7Qs9GA0LXRgdGB0LAKICAgICAgICBzZWFyY2hJblRNREIoCiAgICAgICAgICBhaVJlc3BvbnNlLl8weDI0LAogICAgICAgICAgZnVuY3Rpb24gKG1vdmllcykgewogICAgICAgICAgICBfMHgzai5fMHgzYy5kaXNwbGF5ID0gIm5vbmUiOwoKICAgICAgICAgICAgaWYgKG1vdmllcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICBfMHgzay5pbm5lckhUTUwgPQogICAgICAgICAgICAgICAg')"<div class="_d('YWktc2VhcmNoLWVtcHR5')">Фильмы не найдены. Попробуйте другой запрос.</div>"_d('OwogICAgICAgICAgICAgIF8weDNrLl8weDNjLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgICAgIF8weDNtLl8weDNjLmRpc3BsYXkgPSAiZmxleCI7CiAgICAgICAgICAgICAgXzB4M2wuXzB4M2MuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgICAgXzB4M2guZGlzYWJsZWQgPSBmYWxzZTsKCiAgICAgICAgICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INC90LDQstC40LPQsNGG0LjRjiDQv9C+0YHQu9C1INC/0YPRgdGC0L7Qs9C+INGA0LXQt9GD0LvRjNGC0LDRgtCwCiAgICAgICAgICAgICAgaWYgKF8weDN0KSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdXBkYXRlTmF2aWdhdGlvbigpOwogICAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDQntGC0L7QsdGA0LDQttCw0LXQvCDRgNC10LfRg9C70YzRgtCw0YLRiwogICAgICAgICAgICB2YXIgXzB4NTUgPQogICAgICAgICAgICAgIA==')"<div class="_d('YWktc2VhcmNoLV8weDJ4LXRpdGxl')">Найдено фильмов: "_d('ICsKICAgICAgICAgICAgICBtb3ZpZXMubGVuZ3RoICsKICAgICAgICAgICAgICAiPC9kaXY+IjsKCiAgICAgICAgICAgIG1vdmllcy5mb3JFYWNoKGZ1bmN0aW9uIChfMHgzNSkgewogICAgICAgICAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IExhbXBhLkFwaS5pbWcoKSDQtNC70Y8g0L/RgNCw0LLQuNC70YzQvdC+0LPQviDQv9C+0LvRg9GH0LXQvdC40Y8g0L/QvtGB0YLQtdGA0L7QsgogICAgICAgICAgICAgIHZhciBfMHg1NiA9IF8weDM1LnBvc3Rlcl9wYXRoCiAgICAgICAgICAgICAgICA/IExhbXBhLkFwaS5pbWcoXzB4MzUucG9zdGVyX3BhdGgsICJ3MjAwIikKICAgICAgICAgICAgICAgIDogIiI7CiAgICAgICAgICAgICAgdmFyIF8weDU3ID0gXzB4MzUucmVsZWFzZV9kYXRlCiAgICAgICAgICAgICAgICA/IF8weDM1LnJlbGVhc2VfZGF0ZS5zdWJzdHJpbmcoMCwgNCkKICAgICAgICAgICAgICAgIDogIj8iOwogICAgICAgICAgICAgIHZhciBfMHg1OCA9IF8weDM1LnZvdGVfYXZlcmFnZQogICAgICAgICAgICAgICAgPyBfMHgzNS52b3RlX2F2ZXJhZ2UudG9GaXhlZCgxKQogICAgICAgICAgICAgICAgOiAiTi9BIjsKICAgICAgICAgICAgICB2YXIgXzB4NTkgPSBfMHgzNS5fMHg1OQogICAgICAgICAgICAgICAgPyBfMHgzNS5fMHg1OS5sZW5ndGggPiAxNTAKICAgICAgICAgICAgICAgICAgPyBfMHgzNS5fMHg1OS5zdWJzdHJpbmcoMCwgMTUwKSArICIuLi4iCiAgICAgICAgICAgICAgICAgIDogXzB4MzUuXzB4NTkKICAgICAgICAgICAgICAgIDogItCe0L/QuNGB0LDQvdC40LUg0L3QtdC00L7RgdGC0YPQv9C90L4iOwoKICAgICAgICAgICAgICBfMHg1NSArPQogICAgICAgICAgICAgICAg')"<div class="_d('YWktc2VhcmNoLV8weDJ3LV8weDEyIHNlbGVjdG9y')" data-_0x35-id="_d('JyArCiAgICAgICAgICAgICAgICBfMHgzNS5pZCArCiAgICAgICAgICAgICAgICAn')" data-_0x35-type="_d('JyArCiAgICAgICAgICAgICAgICBfMHgzNS50eXBlICsKICAgICAgICAgICAgICAgICc=')"_d('IHRhYmluZGV4PQ==')"-1">"_d('OwogICAgICAgICAgICAgIGlmIChfMHg1NikgewogICAgICAgICAgICAgICAgXzB4NTUgKz0KICAgICAgICAgICAgICAgICAg')"<img class="_d('YWktc2VhcmNoLV8weDJ3LXBvc3Rlcg==')" src="_d('JyArCiAgICAgICAgICAgICAgICAgIF8weDU2ICsKICAgICAgICAgICAgICAgICAgJw==')" alt="_d('JyArCiAgICAgICAgICAgICAgICAgIF8weDM1LnRpdGxlICsKICAgICAgICAgICAgICAgICAgJw==')" onerror="_d('dGhpcy5zcmM9XCcuL2ltZy9pbWdfYnJva2VuLnN2Z1wn')">"_d('OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfMHg1NSArPQogICAgICAgICAgICAgICAgICA=')"<div class="_d('YWktc2VhcmNoLV8weDJ3LXBvc3Rlcg==')"_d('IF8weDNjPQ==')"_d('YmFja2dyb3VuZDogIzQ0NDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1fMHgydDogY2VudGVyOyBjb2xvcjogIzg4ODsgZm9udC1zaXplOiAxMnB4Ow==')">Нет<br>постера</div>"_d('OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfMHg1NSArPSA=')"<div class="_d('YWktc2VhcmNoLV8weDJ3LWluZm8=')">"_d('OwogICAgICAgICAgICAgIF8weDU1ICs9CiAgICAgICAgICAgICAgICA=')"<div class="_d('YWktc2VhcmNoLV8weDJ3LXRpdGxl')">"_d('ICsgXzB4MzUudGl0bGUgKyAiPC9kaXY+IjsKICAgICAgICAgICAgICBfMHg1NSArPQogICAgICAgICAgICAgICAg')"<div class="_d('YWktc2VhcmNoLV8weDJ3LW1ldGE=')">' + _0x57 + " • " +(_0x35.type === "_0x38" ? "Сериал" : "Фильм"_d('KSArCiAgICAgICAgICAgICAgICA=')"</div>";_0x55 += '<div class="_d('YWktc2VhcmNoLV8weDJ3LV8weDU4')">★ "_d('ICsgXzB4NTggKyAiPC9kaXY+IjsKICAgICAgICAgICAgICBfMHg1NSArPQogICAgICAgICAgICAgICAg')"<div class="_d('YWktc2VhcmNoLV8weDJ3LV8weDU5')">' + _0x59 + "</div>";_0x55 += "</div></div>";});_0x3k.innerHTML = _0x55;_0x3k._0x3c.display = "block";_0x3m._0x3c.display = "flex";_0x3l._0x3c.display = "block";if(_0x3h){_0x3h.disabled = false;_0x3h.textContent = "Новый поиск";}// Сохраняем запрос в историю после успешного поиска saveToHistory(_0x4p);// Обновляем постоянную историю showPermanentHistory();// Обработчики клика на результаты var _0x44 = _0x3k.querySelectorAll(".ai-search-_0x2w-_0x12");// Функция для открытия фильма function openMovie(_0x12){// Проверяем,что элемент существует if(!_0x12){_0xa.warn("openMovie: элемент не найден");return;}var _0x5b = _0x12.getAttribute("data-_0x35-id");var _0x5c = _0x12.getAttribute("data-_0x35-type");// Проверяем наличие обязательных данных if(!_0x5b || !_0x5c){_0xa.warn("openMovie: отсутствуют данные фильма",{_0x5b: _0x5b,_0x5c: _0x5c,});return;}// Проверяем,что Lampa.Activity доступен if(!Lampa || !Lampa.Activity || typeof Lampa.Activity.push !== "function"){_0xa.error("openMovie: Lampa.Activity недоступен");if(Lampa && Lampa.Noty && typeof Lampa.Noty.show === "function"){Lampa.Noty.show("Ошибка: невозможно открыть фильм");}return;}// Преобразуем _0x5b в число var _0x5d = parseInt(_0x5b,10);if(isNaN(_0x5d)){_0xa.warn("openMovie: неверный ID фильма",_0x5b);return;}// Закрываем модальное окно немедленно try{closeModal();}catch(e){_0xa.warn("openMovie: ошибка при закрытии модального окна",e);}// Небольшая задержка перед открытием фильма,чтобы модальное окно успело закрыться setTimeout(function(){try{// Открываем фильм/сериал Lampa.Activity.push({url: "",title: _0x5c === "_0x38" ? "Сериал" : "Фильм",component: "full",id: _0x5d,method: _0x5c === "_0x38" ? "_0x38" : "_0x35",source: "tmdb",});}catch(e){_0xa.error("openMovie: ошибка при открытии фильма",e);if(Lampa && Lampa.Noty && typeof Lampa.Noty.show === "function"){Lampa.Noty.show("Ошибка при открытии фильма");}}},100);}_0x44.forEach(function(_0x12){// Флаг для предотвращения двойного клика var _0x5e = false;// Функция для обработки клика var _0x5f = function(e){// Предотвращаем двойной клик if(_0x5e){e.preventDefault();e.stopPropagation();return false;}// Используем сам элемент _0x12,так как он содержит data-_0x35-id // Клик может быть на любом дочернем элементе(изображение,текст и т.д.)_0x5e = true;openMovie(_0x12);// Сбрасываем флаг через небольшую задержку setTimeout(function(){_0x5e = false;},500);e.preventDefault();e.stopPropagation();return false;};// Обработчик клика _0x12.addEventListener("_d('Y2xpY2s=')",_0x5f,true);// Используем capture phase // Обработчик для TV пульта if(typeof $ !== "_d('dW5kZWZpbmVk')"){$(_0x12).on("hover:enter",function(){if(!_0x5e){_0x5e = true;openMovie(_0x12);setTimeout(function(){_0x5e = false;},500);}});}});// Обновляем навигацию после отображения результатов if(_0x3t){setTimeout(function(){updateNavigation();},100);}},function(progress){// Callback прогресса if(progress.phase === "searching"){var _0x5g = Math.round((progress.current / progress._0x30)* 100);if(_0x3o){_0x3o._0x3c.width = _0x5g + "%";}if(_0x3p){_0x3p.textContent = "Ищу: " + progress.current + " из " + progress._0x30 + "(" + progress.title + ")";}}else if(progress.phase === "complete"){if(_0x3o){_0x3o._0x3c.width = "100%";}if(_0x3p){_0x3p.textContent = "Найдено " + progress.found + " из " + progress._0x30;}}});});}// Обработчики для кнопки поиска(_0x3h)?(_0x3h.addEventListener("_d('Y2xpY2s=')",function(){if(_0x3h.textContent === "Новый поиск"){// Проверяем,есть ли текст в поле ввода var _0x4p = _0x3i ? _0x3i.value.trim(): "";if(_0x4p){// Если есть текст,выполняем поиск с этим текстом performSearch();):(// Если текста нет,сбрасываем состояние для нового поиска if(_0x3i){_0x3i.value = "";);_0x3k._0x3c.display = "none";_0x3k.innerHTML = "";_0x3j._0x3c.display = "none";_0x3l._0x3c.display = "block";_0x3m._0x3c.display = "flex";_0x3h.textContent = "Найти";// Обновляем навигацию if(_0x3t){setTimeout(function(){updateNavigation();},100);}}}else{// Выполняем поиск performSearch();}});// Обработчик для TV пульта if(typeof $ !== "_d('dW5kZWZpbmVk')"){$(_0x3h).on("hover:enter",function(){(_0x3h.textContent === "Новый поиск")?(// Проверяем,есть ли текст в поле ввода var _0x4p = _0x3i ? _0x3i.value.trim(): "";if(_0x4p){// Если есть текст,выполняем поиск с этим текстом performSearch();):(// Если текста нет,сбрасываем состояние для нового поиска if(_0x3i){_0x3i.value = "";);_0x3k._0x3c.display = "none";_0x3k.innerHTML = "";_0x3j._0x3c.display = "none";_0x3l._0x3c.display = "block";_0x3m._0x3c.display = "flex";_0x3h.textContent = "Найти";// Обновляем навигацию if(_0x3t){setTimeout(function(){updateNavigation();},100);}}}else{// Выполняем поиск performSearch();}});}}// Обработчик Escape для закрытия var _0x5j = function(e){if(e._0x11 === "Escape" || e.keyCode === 27){closeModal();}};document.addEventListener("keydown",_0x5j);// Обновляем функцию closeModal,чтобы она удаляла обработчик Escape var _0x5k = closeModal;closeModal = function(){document.removeEventListener("keydown",_0x5j);_0x5k();};// Инициализируем навигацию для TV пульта сразу при открытии модального окна if(Lampa && Lampa.Controller){// Инициализируем навигацию немедленно для переключения управления initNavigation();}// Фокус на поле ввода(только для обычных устройств,не для TV)if(_0x3i &&(!Lampa || !Lampa.Controller)){setTimeout(function(){_0x3i.focus();},100);}// Отображаем постоянную историю при открытии модального окна showPermanentHistory();return _0x3d;}// Добавление кнопки в шапку function addHeaderButton(){if(document.querySelector("_d('LmFpLXNlYXJjaC1oZWFkZXItYnRu')")){return;// Кнопка уже добавлена}var _0x5l = document.querySelector(".head__actions");if(!_0x5l){// Пробуем добавить позже setTimeout(addHeaderButton,500);return;}var _0x5m = document.createElement("div");_0x5m.className = "head__action selector ai-search-header-btn";_0x5m.innerHTML = _0xb;_0x5m.title = "Поиск фильмов";_0x5m.addEventListener("_d('Y2xpY2s=')",function(){createSearchModal();});// Добавляем обработчик для TV пульта $(_0x5m).on("_d('aG92ZXI6ZW50ZXIgaG92ZXI6Y2xpY2sgaG92ZXI6dG91Y2g=')",function(){createSearchModal();});_0x5l.appendChild(_0x5m);}// Функция для очистки кеша function clearCache(){try{_0xa.log("AI Search Plugin: Начало очистки кеша");// Получаем текущие значения кеша для логирования var _0x5n = Lampa.Storage.get(_0xd);var _0x5o = Lampa.Storage.get(_0xe);_0xa.log("AI Search Plugin: Кеш до очистки - AI:",_0x5n,"TMDB:",_0x5o);// Очищаем кеш AI ответов - пробуем несколько способов try{Lampa.Storage.set(_0xd,{});}catch(e1){_0xa.warn("AI Search Plugin: Не удалось очистить AI кеш через set:",e1);try{Lampa.Storage.remove(_0xd);}catch(e2){_0xa.warn("AI Search Plugin: Не удалось очистить AI кеш через remove:",e2);}}// Очищаем кеш TMDB результатов try{Lampa.Storage.set(_0xe,{});}catch(e3){_0xa.warn("AI Search Plugin: Не удалось очистить TMDB кеш через set:",e3);try{Lampa.Storage.remove(_0xe);}catch(e4){_0xa.warn("AI Search Plugin: Не удалось очистить TMDB кеш через remove:",e4);}}// Проверяем,что кеш действительно очищен var _0x5p = Lampa.Storage.get(_0xd);var _0x5q = Lampa.Storage.get(_0xe);_0xa.log("AI Search Plugin: Кеш после очистки - AI:",_0x5p,"TMDB:",_0x5q);// Проверяем,что кеш пустой или является пустым объектом var _0x5r = !_0x5p ||(typeof _0x5p === "object" && Object.keys(_0x5p).length === 0);var _0x5s = !_0x5q ||(typeof _0x5q === "object" && Object.keys(_0x5q).length === 0);(_0x5r && _0x5s)?(Lampa.Noty.show("Кеш успешно очищен");_0xa.log("AI Search Plugin: Кеш успешно очищен");):(Lampa.Noty.show("Кеш очищен(некоторые данные могут остаться)");_0xa.log("AI Search Plugin: Кеш очищен,но возможно остались данные"););return true;}catch(e){_0xa.error("AI Search Plugin: Ошибка при очистке кеша:",e);Lampa.Noty.show("Ошибка при очистке кеша: " +(e.message || e.toString()));return false;}}// Инициализация настроек плагина function initSettings(){// Добавляем компонент в настройки Lampa.SettingsApi.addComponent({component: "ai_search",name: "Поиск фильмов",icon: _0xb,});// ============================================ // РАЗДЕЛ: API и Модель // ============================================ // Добавляем заголовок раздела "API и Модель" Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "ai_search_section_api",type: "title",},field:{name: "API и Модель",},onChange: function(value){// Заголовок раздела,без действий},});// Добавляем текстовое поле для API ключа OpenRouter Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "_d('YWlfc2VhcmNoX2FwaV9rZXk=')",type: "_0x3i",placeholder: "Введите API ключ OpenRouter",values: Lampa.Storage.get("_d('YWlfc2VhcmNoX2FwaV9rZXk=')")|| "",default: "",},field:{name: "API ключ OpenRouter",description: "Введите ваш API ключ от OpenRouter.ai. Получить ключ можно на https://openrouter.ai/keys",},onChange: function(value){var _0x5t = value ? value.trim(): "";Lampa.Storage.set("_d('YWlfc2VhcmNoX2FwaV9rZXk=')",_0x5t);_0x7 = _0x5t;if(_0x5t){Lampa.Noty.show("API ключ сохранен");}},});// Добавляем текстовое поле для модели ИИ Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "_d('YWlfc2VhcmNoX21vZGVs')",type: "_0x3i",placeholder: "Введите название модели",values: Lampa.Storage.get("_d('YWlfc2VhcmNoX21vZGVs')")|| "",default: "",},field:{name: "Модель ИИ",description: "Введите название модели ИИ(например: qwen/qwen-2.5-72b-instruct:free). Рекомендуемые бесплатные модели: qwen/qwen-2.5-72b-instruct:free,qwen/qwen-2.5-32b-instruct:free,deepseek/deepseek-chat-v3.1:free",},onChange: function(value){var _0x5u = value ? value.trim(): "";Lampa.Storage.set("_d('YWlfc2VhcmNoX21vZGVs')",_0x5u);_0x8 = _0x5u;(_0x5u)?(Lampa.Noty.show("Модель изменена на: " + _0x5u);):(Lampa.Noty.show("Модель очищена"););},});// Добавляем текстовое поле для Base URL Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "_d('YWlfc2VhcmNoX2Jhc2VfdXJs')",type: "_0x3i",placeholder: "Введите Base URL API",values: Lampa.Storage.get("_d('YWlfc2VhcmNoX2Jhc2VfdXJs')")|| _0x3,default: _0x3,},field:{name: "OpenAI Base URL",description: "Введите Base URL для API(по умолчанию: https://openrouter.ai/api/v1). Можно использовать OpenAI API или другие совместимые сервисы.",},onChange: function(value){var _0x5v = value ? value.trim(): _0x3;// Убираем завершающий слэш,если есть _0x5v = _0x5v.replace(/\/+$/,"");Lampa.Storage.set("_d('YWlfc2VhcmNoX2Jhc2VfdXJs')",_0x5v);_0x9 = _0x5v;(_0x5v)?(Lampa.Noty.show("Base URL изменен на: " + _0x5v);):(Lampa.Noty.show("Base URL сброшен на значение по умолчанию"););},});// ============================================ // РАЗДЕЛ: Настройки поиска // ============================================ // Добавляем заголовок раздела "Настройки поиска" Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "ai_search_section_search",type: "title",},field:{name: "Настройки поиска",},onChange: function(value){// Заголовок раздела,без действий},});// Создаем объект для выбора количества результатов var _0x5w ={};for(var _0x1j = 5;_0x1j <= 30;_0x1j += 5){_0x5w[_0x1j] = _0x1j.toString();}// Добавляем параметр для выбора количества результатов Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "_d('YWlfc2VhcmNoX21heF9yZXN1bHRz')",type: "select",values: _0x5w,default: _0xf,},field:{name: "Количество результатов поиска",description: "Выберите,сколько фильмов и сериалов показывать в результатах поиска(от 5 до 30)",},onChange: function(value){var _0x5y = parseInt(value)|| _0xf;Lampa.Storage.set("_d('YWlfc2VhcmNoX21heF9yZXN1bHRz')",_0x5y);_0x1e = _0x5y;// Обновляем глобальную переменную Lampa.Noty.show("Количество результатов поиска изменено на " + _0x5y);},});// Создаем объект для выбора количества записей в истории var _0x5z ={};for(var _0x1j = 5;_0x1j <= 50;_0x1j += 5){_0x5z[_0x1j] = _0x1j.toString();}// Добавляем параметр для выбора количества записей в истории Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "_d('YWlfc2VhcmNoX2hpc3RvcnlfbWF4')",type: "select",values: _0x5z,default: _0xi,},field:{name: "Количество записей в истории поиска",description: "Выберите,сколько последних запросов сохранять в истории поиска(от 5 до 50)",},onChange: function(value){var _0x5y = parseInt(value)|| _0xi;Lampa.Storage.set("_d('YWlfc2VhcmNoX2hpc3RvcnlfbWF4')",_0x5y);// Обрезаем историю,если новое значение меньше текущего размера var _0xo = getSearchHistory();if(_0xo.length > _0x5y){_0xo = _0xo.slice(0,_0x5y);Lampa.Storage.set(_0xh,_0xo);}Lampa.Noty.show("Количество записей в истории изменено на " + _0x5y);},});// ============================================ // РАЗДЕЛ: Кэш // ============================================ // Добавляем заголовок раздела "Кэш" Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "ai_search_section_cache",type: "title",},field:{name: "Кэш",},onChange: function(value){// Заголовок раздела,без действий},});// Добавляем настройку включения/выключения автоочистки кэша Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "_d('YWlfc2VhcmNoX2F1dG9fY2xlYXJfY2FjaGVfZW5hYmxlZA==')",type: "select",values:{true: "Включено",false: "Выключено",},default: _0xj ? "_d('dHJ1ZQ==')" : "false",},field:{name: "Автоочистка кэша",description: "Автоматически очищать устаревшие записи кэша через заданный интервал",},onChange: function(value){var _0x4i = value === "_d('dHJ1ZQ==')" || value === true;Lampa.Storage.set("_d('YWlfc2VhcmNoX2F1dG9fY2xlYXJfY2FjaGVfZW5hYmxlZA==')",_0x4i);(_0x4i)?(Lampa.Noty.show("Автоочистка кэша включена");// Запускаем проверку автоочистки checkAndAutoClearCache();):(Lampa.Noty.show("Автоочистка кэша выключена"););},});// Создаем объект для выбора интервала автоочистки(в часах)var _0x64 ={};// От 1 до 24 часов for(var _0x1j = 1;_0x1j <= 24;_0x1j++){_0x64[_0x1j] = _0x1j +(_0x1j === 1 ? " час" : _0x1j < 5 ? " часа" : " часов");}// 2,3,5,7 дней _0x64[48] = "2 дня";_0x64[72] = "3 дня";_0x64[120] = "5 дней";_0x64[168] = "7 дней";// Добавляем параметр для выбора интервала автоочистки кэша Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "_d('YWlfc2VhcmNoX2F1dG9fY2xlYXJfY2FjaGVfaW50ZXJ2YWw=')",type: "select",values: _0x64,default: Math.round(_0xk /(60 * 60 * 1000)).toString(),},field:{name: "Интервал автоочистки кэша",description: "Выберите,как часто автоматически очищать устаревшие записи кэша(от 1 часа до 7 дней)",},onChange: function(value){var _0x66 = parseInt(value)|| 24;Lampa.Storage.set("_d('YWlfc2VhcmNoX2F1dG9fY2xlYXJfY2FjaGVfaW50ZXJ2YWw=')",_0x66);var _0x67 = "";(_0x66 < 24)?(_0x67 = _0x66 +(_0x66 === 1 ? " час" : _0x66 < 5 ? " часа" : " часов");):(var _0x68 = _0x66 / 24;_0x67 = _0x68 +(_0x68 === 1 ? " день" : _0x68 < 5 ? " дня" : " дней"););Lampa.Noty.show("Интервал автоочистки кэша изменен на " + _0x67);// Запускаем проверку автоочистки с новым интервалом checkAndAutoClearCache();},});// Добавляем кнопку очистки кеша Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "_d('YWlfc2VhcmNoX2NsZWFyX2NhY2hl')",type: "_0x5m",},field:{name: "_d('0J7Rh9C40YHRgtC60LAg0LrQtdGI0LA=')",description: "Очистить все закэшированные данные поиска(ответы ИИ и результаты TMDB)",},onChange: function(value){_0xa.log("AI Search Plugin: Кнопка очистки кеша нажата,value:",value);// Вызываем функцию очистки кеша clearCache();},});// ============================================ // РАЗДЕЛ: История поиска // ============================================ // Добавляем заголовок раздела "История поиска" Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "ai_search_section_history",type: "title",},field:{name: "История поиска",},onChange: function(value){// Заголовок раздела,без действий},});// Добавляем кнопку очистки истории поиска Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "ai_search_clear_history",type: "_0x5m",},field:{name: "Очистка истории поиска",description: "Очистить всю историю поисковых запросов",},onChange: function(value){clearHistory();Lampa.Noty.show("_d('0JjRgdGC0L7RgNC40Y8g0L/QvtC40YHQutCwINC+0YfQuNGJ0LXQvdCw')");},});// ============================================ // РАЗДЕЛ: Информация // ============================================ // Добавляем заголовок раздела "Информация" Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "ai_search_section_info",type: "title",},field:{name: "Информация",},onChange: function(value){// Заголовок раздела,без действий},});// Добавляем информацию о создателе Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "ai_search_creator",type: "static",},field:{name: "О плагине",description: "Плагин для интеллектуального поиска фильмов и сериалов с использованием искусственного интеллекта через OpenRouter API.",},onChange: function(value){// Информационное поле,без действий},});// Добавляем контактную информацию Lampa.SettingsApi.addParam({component: "ai_search",_0x6b:{name: "ai_search_contact",type: "static",},field:{name: "Контактная информация",description: "Email: admin@fovway.ru",},onChange: function(value){// Информационное поле,без действий},});// Функция для добавления обработчика на кнопку очистки кеша function attachClearCacheHandler(){// Ищем кнопку очистки кеша разными способами var _0x69 = null;var _0x6a = [ function(){// Способ 1: По data-name параметра var _0x6b = document.querySelector('[data-name="_d('YWlfc2VhcmNoX2NsZWFyX2NhY2hl')"]');if(_0x6b){var _0x6c = _0x6b.closest("_d('LnNldHRpbmdzX19wYXJhbQ==')");if(_0x6c){return _0x6c.querySelector("_0x5m,.selector,.settings__param-value _0x5m,.settings__param-value .selector");}return _0x6b.querySelector("_0x5m,.selector");}return null;},function(){// Способ 2: По тексту метки var _0x6d = document.querySelectorAll("_d('LnNldHRpbmdzX19wYXJhbQ==')");for(var _0x1j = 0;_0x1j < _0x6d.length;_0x1j++){var _0x6b = _0x6d[_0x1j];var _0x6g = _0x6b.querySelector("_d('LnNldHRpbmdzX19wYXJhbS1uYW1l')");if(_0x6g && _0x6g.textContent && _0x6g.textContent.indexOf("_d('0J7Rh9C40YHRgtC60LAg0LrQtdGI0LA=')")!== -1){return _0x6b.querySelector("_0x5m,.selector,.settings__param-value _0x5m,.settings__param-value .selector");}}return null;},function(){// Способ 3: По описанию var _0x6d = document.querySelectorAll("_d('LnNldHRpbmdzX19wYXJhbQ==')");for(var _0x1j = 0;_0x1j < _0x6d.length;_0x1j++){var _0x6b = _0x6d[_0x1j];var _0x6k = _0x6b.querySelector(".settings__param-description");if(_0x6k && _0x6k.textContent && _0x6k.textContent.indexOf("Очистить все закэшированные")!== -1){return _0x6b.querySelector("_0x5m,.selector,.settings__param-value _0x5m,.settings__param-value .selector");}}return null;},];for(var _0x6l = 0;_0x6l < _0x6a.length;_0x6l++){_0x69 = _0x6a[_0x6l]();if(_0x69){break;}}if(_0x69 && !_0x69.hasAttribute("data-ai-_0x1f-handler-attached")){_0xa.log("AI Search Plugin: Найдена кнопка очистки кеша,добавляем обработчик",_0x69);// Помечаем кнопку,чтобы не добавлять обработчик повторно _0x69.setAttribute("data-ai-_0x1f-handler-attached","_d('dHJ1ZQ==')");// Обработчик клика var _0x6m = function(e){e.preventDefault();e.stopPropagation();_0xa.log("AI Search Plugin: Клик по кнопке очистки кеша");clearCache();return false;};_0x69.addEventListener("_d('Y2xpY2s=')",_0x6m,true);// Обработчик для TV пульта if(typeof $ !== "_d('dW5kZWZpbmVk')"){$(_0x69).on("_d('aG92ZXI6ZW50ZXIgaG92ZXI6Y2xpY2sgaG92ZXI6dG91Y2g=')",function(e){e.preventDefault();e.stopPropagation();_0xa.log("AI Search Plugin: Активация кнопки очистки кеша через пульт");clearCache();return false;});}return true;}return false;}// Обновляем значения полей при открытии настроек(Lampa.Settings && Lampa.Settings.listener)?(Lampa.Settings.listener.follow("open",function(){// Функция для обновления полей и добавления обработчика function updateFieldsAndAttachHandler(){// Обновляем поле API ключа var _0x6n = document.querySelector('[data-name="_d('YWlfc2VhcmNoX2FwaV9rZXk=')"]');if(_0x6n){var _0x6o = Lampa.Storage.get("_d('YWlfc2VhcmNoX2FwaV9rZXk=')");if(_0x6o !== null && _0x6o !== undefined){_0x6n.value = _0x6o;):(_0x6n.value = "";);}// Обновляем поле модели var _0x6p = document.querySelector('[data-name="_d('YWlfc2VhcmNoX21vZGVs')"]');(_0x6p)?(var _0x6q = Lampa.Storage.get("_d('YWlfc2VhcmNoX21vZGVs')");if(_0x6q !== null && _0x6q !== undefined){_0x6p.value = _0x6q;):(_0x6p.value = "";);}// Обновляем поле Base URL var _0x6r = document.querySelector('[data-name="_d('YWlfc2VhcmNoX2Jhc2VfdXJs')"]');(_0x6r)?(var _0x6s = Lampa.Storage.get("_d('YWlfc2VhcmNoX2Jhc2VfdXJs')");if(_0x6s !== null && _0x6s !== undefined){_0x6r.value = _0x6s;):(_0x6r.value = _0x3;);}// Пытаемся добавить обработчик на кнопку attachClearCacheHandler();}// Пробуем несколько раз с задержкой,так как кнопка может рендериться асинхронно var _0x6t = [100,300,500,1000];for(var _0x1j = 0;_0x1j < _0x6t.length;_0x1j++){(function(delay){setTimeout(function(){updateFieldsAndAttachHandler();},delay);})(_0x6t[_0x1j]);}// Также используем MutationObserver для отслеживания появления кнопки var _0x6v = document.querySelector("_d('LnNldHRpbmdz')");if(_0x6v){var _0x6w = new MutationObserver(function(mutations){attachClearCacheHandler();});_0x6w.observe(_0x6v,{childList: true,subtree: true,});// Останавливаем наблюдение через 5 секунд setTimeout(function(){_0x6w.disconnect();},5000);// Делегирование событий на уровне контейнера настроек для кнопки очистки кеша var _0x6x = function(e){var _0x6y = e._0x6y;// Проверяем,является ли цель клика кнопкой очистки кеша var _0x6z = _0x6y.closest("_d('LnNldHRpbmdzX19wYXJhbQ==')");if(_0x6z){var _0x70 = _0x6z.querySelector("_d('LnNldHRpbmdzX19wYXJhbS1uYW1l')");if(_0x70 && _0x70.textContent && _0x70.textContent.indexOf("_d('0J7Rh9C40YHRgtC60LAg0LrQtdGI0LA=')")!== -1){// Это наша кнопка! e.preventDefault();e.stopPropagation();_0xa.log("_d('QUkgU2VhcmNoIFBsdWdpbjog0JrQu9C40Log0L/QviDQutC90L7Qv9C60LUg0L7Rh9C40YHRgtC60Lgg0LrQtdGI0LAgKNGH0LXRgNC10Lcg0LTQtdC70LXQs9C40YDQvtCy0LDQvdC40LUp')");clearCache();return false;}}};// Добавляем обработчик с capture для перехвата события _0x6v.addEventListener("_d('Y2xpY2s=')",_0x6x,true);// Также для TV пульта if(typeof $ !== "_d('dW5kZWZpbmVk')"){$(_0x6v).on("_d('aG92ZXI6ZW50ZXIgaG92ZXI6Y2xpY2sgaG92ZXI6dG91Y2g=')","_d('LnNldHRpbmdzX19wYXJhbQ==')",function(e){var _0x70 = $(this).find("_d('LnNldHRpbmdzX19wYXJhbS1uYW1l')");if(_0x70.length && _0x70.text().indexOf("_d('0J7Rh9C40YHRgtC60LAg0LrQtdGI0LA=')")!== -1){e.preventDefault();e.stopPropagation();_0xa.log("_d('QUkgU2VhcmNoIFBsdWdpbjog0JDQutGC0LjQstCw0YbQuNGPINC60L3QvtC/0LrQuCDQvtGH0LjRgdGC0LrQuCDQutC10YjQsCDRh9C10YDQtdC3INC/0YPQu9GM0YIgKNC00LXQu9C10LPQuNGA0L7QstCw0L3QuNC1KQ==')");clearCache();return false;}});}}});}}// Инициализация плагина function initPlugin(){// Проверяем наличие необходимых API if(!Lampa){_0xa.error("_d('QUkgU2VhcmNoIFBsdWdpbjogTGFtcGEgQVBJIG5vdCBhdmFpbGFibGU=')");return;}// Значения теперь загружаются из настроек,предупреждение не нужно // Инициализируем настройки initSettings();// Обновляем значения из хранилища _0x1e = getMaxResults();_0x7 = getOpenRouterApiKey();_0x8 = getAiModel();_0x9 = getOpenRouterBaseUrl();// Логируем используемую модель _0xa.log("_d('QUkgU2VhcmNoIFBsdWdpbjog0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0YEg0LzQvtC00LXQu9GM0Y4g')" + _0x8);// Запускаем проверку автоочистки кэша при инициализации checkAndAutoClearCache();// Настраиваем периодическую проверку автоочистки кэша(каждые 10 минут)setInterval(function(){checkAndAutoClearCache();},10 * 60 * 1000);// 10 минут // Добавляем кнопку в шапку addHeaderButton();// Отслеживаем изменения DOM для повторного добавления кнопки var _0x6w = new MutationObserver(function(mutations){if(!document.querySelector("_d('LmFpLXNlYXJjaC1oZWFkZXItYnRu')")){addHeaderButton();}});_0x6w.observe(document.body,{childList: true,subtree: true});}// Запуск плагина(window.appready)?(setTimeout(initPlugin,500);):(Lampa.Listener.follow("_d('YXBw')",function(e){if(e.type === "_d('cmVhZHk=')"){setTimeout(initPlugin,500););});}})();